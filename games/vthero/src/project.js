window.__require=function e(t,n,i){function s(r,a){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!a&&u)return u(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){return s(t[r][1][e]||e)},d,d.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(e,t,n){"use strict";var i=i||function(e,t){var n={},i=n.lib={},s=function(){},o=i.Base={extend:function(e){s.prototype=this;var t=new s;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var s=0;s<e;s++)t[i+s>>>2]|=(n[s>>>2]>>>24-s%4*8&255)<<24-(i+s)%4*8;else if(65535<n.length)for(s=0;s<e;s+=4)t[i+s>>>2]=n[s>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;i<t;i+=4)n.push(4294967296*e.random()|0);return new r.init(n,t)}}),a=n.enc={},c=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new r.init(n,t/2)}},u=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new r.init(n,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,s=n.sigBytes,o=this.blockSize,a=s/(4*o);if(t=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,s=e.min(4*t,s),t){for(var c=0;c<t;c+=o)this._doProcessBlock(i,c);c=i.splice(0,t),n.sigBytes-=s}return new r.init(c,s)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math);(function(e){for(var t=i,n=(o=t.lib).WordArray,s=o.Hasher,o=t.algo,r=[],a=[],c=function(e){return 4294967296*(e-(0|e))|0},u=2,d=0;64>d;){var l;e:{l=u;for(var h=e.sqrt(l),f=2;f<=h;f++)if(!(l%f)){l=!1;break e}l=!0}l&&(8>d&&(r[d]=c(e.pow(u,.5))),a[d]=c(e.pow(u,1/3)),d++),u++}var v=[];o=o.SHA256=s.extend({_doReset:function(){this._hash=new n.init(r.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],s=n[1],o=n[2],r=n[3],c=n[4],u=n[5],d=n[6],l=n[7],h=0;64>h;h++){if(16>h)v[h]=0|e[t+h];else{var f=v[h-15],m=v[h-2];v[h]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+v[h-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+v[h-16]}f=l+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&d)+a[h]+v[h],m=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&s^i&o^s&o),l=d,d=u,u=c,c=r+f|0,r=o,o=s,s=i,i=f+m|0}n[0]=n[0]+i|0,n[1]=n[1]+s|0,n[2]=n[2]+o|0,n[3]=n[3]+r|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+l|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,s=8*t.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=e.floor(i/4294967296),n[15+(s+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(o),t.HmacSHA256=s._createHmacHelper(o)})(Math),function(){var e=i,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var i=e.blockSize,s=4*i;n.sigBytes>s&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),r=this._iKey=n.clone(),a=o.words,c=r.words,u=0;u<i;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=r.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=i,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var s=0;s<n;s+=3)for(var o=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,r=0;4>r&&s+.75*r<n;r++)e.push(i.charAt(o>>>6*(3-r)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,i=this._map;(s=i.charAt(64))&&(-1!=(s=e.indexOf(s))&&(n=s));for(var s=[],o=0,r=0;r<n;r++)if(r%4){var a=i.indexOf(e.charAt(r-1))<<r%4*2,c=i.indexOf(e.charAt(r))>>>6-r%4*2;s[o>>>2]|=(a|c)<<24-o%4*8,o++}return t.create(s,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"})(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Male=1]="Male",e[e.Female=2]="Female"}(e.EGAGender||(e.EGAGender={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.Rejected=1]="Rejected"})(e.EGASdkErrorType||(e.EGASdkErrorType={})),function(e){e[e.NoResponse=0]="NoResponse",e[e.BadResponse=1]="BadResponse",e[e.RequestTimeout=2]="RequestTimeout",e[e.JsonEncodeFailed=3]="JsonEncodeFailed",e[e.JsonDecodeFailed=4]="JsonDecodeFailed",e[e.InternalServerError=5]="InternalServerError",e[e.BadRequest=6]="BadRequest",e[e.Unauthorized=7]="Unauthorized",e[e.UnknownResponseCode=8]="UnknownResponseCode",e[e.Ok=9]="Ok"}(e.EGAHTTPApiResponse||(e.EGAHTTPApiResponse={}))}(e.http||(e.http={}))}(s||(s={}));var s;s.EGAErrorSeverity,s.EGAGender,s.EGAProgressionStatus,s.EGAResourceFlowType;(function(e){(function(e){var t;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"})(t||(t={}));var n=function(){function e(){e.debugEnabled=!1}return e.setInfoLog=function(t){e.instance.infoLogEnabled=t},e.setVerboseLog=function(t){e.instance.infoLogVerboseEnabled=t},e.i=function(n){if(e.instance.infoLogEnabled){var i="Info/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Info)}},e.w=function(n){var i="Warning/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Warning)},e.e=function(n){var i="Error/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Error)},e.ii=function(n){if(e.instance.infoLogVerboseEnabled){var i="Verbose/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Info)}},e.d=function(n){if(e.debugEnabled){var i="Debug/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Debug)}},e.prototype.sendNotificationMessage=function(e,n){switch(n){case t.Error:console.error(e);break;case t.Warning:console.warn(e);break;case t.Debug:"function"==typeof console.debug?console.debug(e):console.log(e);break;case t.Info:console.log(e)}},e.instance=new e,e.Tag="GameAnalytics",e}();e.GALogger=n})(e.logging||(e.logging={}))})(s||(s={})),function(e){(function(t){var n=e.logging.GALogger,s=function(){function e(){}return e.getHmac=function(e,t){var n=i.HmacSHA256(t,e);return i.enc.Base64.stringify(n)},e.stringMatch=function(e,t){return!(!e||!t)&&t.test(e)},e.joinStringArray=function(e,t){for(var n="",i=0,s=e.length;i<s;i++)i>0&&(n+=t),n+=e[i];return n},e.stringArrayContainsString=function(e,t){if(0===e.length)return!1;for(var n in e)if(e[n]===t)return!0;return!1},e.encode64=function(t){t=encodeURI(t);var n,i,s,o,r,a="",c=0,u=0,d=0;do{s=(n=t.charCodeAt(d++))>>2,o=(3&n)<<4|(i=t.charCodeAt(d++))>>4,r=(15&i)<<2|(c=t.charCodeAt(d++))>>6,u=63&c,isNaN(i)?r=u=64:isNaN(c)&&(u=64),a=a+e.keyStr.charAt(s)+e.keyStr.charAt(o)+e.keyStr.charAt(r)+e.keyStr.charAt(u),n=i=c=0,s=o=r=u=0}while(d<t.length);return a},e.decode64=function(t){var i,s,o,r,a="",c=0,u=0,d=0;/[^A-Za-z0-9\+\/\=]/g.exec(t)&&n.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{i=e.keyStr.indexOf(t.charAt(d++))<<2|(o=e.keyStr.indexOf(t.charAt(d++)))>>4,s=(15&o)<<4|(r=e.keyStr.indexOf(t.charAt(d++)))>>2,c=(3&r)<<6|(u=e.keyStr.indexOf(t.charAt(d++))),a+=String.fromCharCode(i),64!=r&&(a+=String.fromCharCode(s)),64!=u&&(a+=String.fromCharCode(c)),i=s=c=0,o=r=u=0}while(d<t.length);return decodeURI(a)},e.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},e.createGuid=function(){return(e.s4()+e.s4()+"-"+e.s4()+"-4"+e.s4().substr(0,3)+"-"+e.s4()+"-"+e.s4()+e.s4()+e.s4()).toLowerCase()},e.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},e.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();t.GAUtilities=s})(e.utilities||(e.utilities={}))}(s||(s={})),function(e){(function(t){var n=e.logging.GALogger,i=e.http.EGASdkErrorType,s=e.utilities.GAUtilities,o=function(){function t(){}return t.validateBusinessEvent=function(e,i,s,o,r){return t.validateCurrency(e)?i<0?(n.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+i),!1):t.validateShortString(s,!0)?t.validateEventPartLength(o,!1)?t.validateEventPartCharacters(o)?t.validateEventPartLength(r,!1)?!!t.validateEventPartCharacters(r)||(n.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+r),!1):(n.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+r),!1):(n.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+o),!1):(n.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+o),!1):(n.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+s),!1):(n.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),!1)},t.validateResourceEvent=function(i,o,r,a,c,u,d){return i==e.EGAResourceFlowType.Undefined?(n.w("Validation fail - resource event - flowType: Invalid flow type."),!1):o?s.stringArrayContainsString(u,o)?r>0?a?t.validateEventPartLength(a,!1)?t.validateEventPartCharacters(a)?s.stringArrayContainsString(d,a)?t.validateEventPartLength(c,!1)?!!t.validateEventPartCharacters(c)||(n.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+c),!1):(n.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+c),!1):(n.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+a),!1):(n.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+a),!1):(n.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+a),!1):(n.w("Validation fail - resource event - itemType: Cannot be (null)"),!1):(n.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+r),!1):(n.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+o),!1):(n.w("Validation fail - resource event - currency: Cannot be (null)"),!1)},t.validateProgressionEvent=function(i,s,o,r){if(i==e.EGAProgressionStatus.Undefined)return n.w("Validation fail - progression event: Invalid progression status."),!1;if(r&&!o&&s)return n.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),!1;if(o&&!s)return n.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),!1;if(!s)return n.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),!1;if(!t.validateEventPartLength(s,!1))return n.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+s),!1;if(!t.validateEventPartCharacters(s))return n.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+s),!1;if(o){if(!t.validateEventPartLength(o,!0))return n.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+o),!1;if(!t.validateEventPartCharacters(o))return n.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+o),!1}if(r){if(!t.validateEventPartLength(r,!0))return n.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+r),!1;if(!t.validateEventPartCharacters(r))return n.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+r),!1}return!0},t.validateDesignEvent=function(e,i){return t.validateEventIdLength(e)?!!t.validateEventIdCharacters(e)||(n.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),!1):(n.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 32 characters or less. String: "+e),!1)},t.validateErrorEvent=function(i,s){return i==e.EGAErrorSeverity.Undefined?(n.w("Validation fail - error event - severity: Severity was unsupported value."),!1):!!t.validateLongString(s,!0)||(n.w("Validation fail - error event - message: Message cannot be above 8192 characters."),!1)},t.validateSdkErrorEvent=function(e,s,o){return!!t.validateKeys(e,s)&&(o!==i.Undefined||(n.w("Validation fail - sdk error event - type: Type was unsupported value."),!1))},t.validateKeys=function(e,t){return!(!s.stringMatch(e,/^[A-z0-9]{32}$/)||!s.stringMatch(t,/^[A-z0-9]{40}$/))},t.validateCurrency=function(e){return!!e&&!!s.stringMatch(e,/^[A-Z]{3}$/)},t.validateEventPartLength=function(e,t){return!(!t||e)||!!e&&!(e.length>64)},t.validateEventPartCharacters=function(e){return!!s.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},t.validateEventIdLength=function(e){return!!e&&!!s.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},t.validateEventIdCharacters=function(e){return!!e&&!!s.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},t.validateAndCleanInitRequestResponse=function(e){if(null==e)return n.w("validateInitRequestResponse failed - no response dictionary."),null;var t={};try{t.enabled=e.enabled}catch(e){return n.w("validateInitRequestResponse failed - invalid type in 'enabled' field."),null}try{var i=e.server_ts;if(!(i>0))return n.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;t.server_ts=i}catch(t){return n.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof e.server_ts+", value="+e.server_ts+", "+t),null}try{var s=e.configurations;t.configurations=s}catch(t){return n.w("validateInitRequestResponse failed - invalid type in 'configurations' field. type="+typeof e.configurations+", value="+e.configurations+", "+t),null}return t},t.validateBuild=function(e){return!!t.validateShortString(e,!1)},t.validateSdkWrapperVersion=function(e){return!!s.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},t.validateEngineVersion=function(e){return!(!e||!s.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},t.validateUserId=function(e){return!!t.validateString(e,!1)||(n.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},t.validateShortString=function(e,t){return!(!t||e)||!(!e||e.length>32)},t.validateString=function(e,t){return!(!t||e)||!(!e||e.length>64)},t.validateLongString=function(e,t){return!(!t||e)||!(!e||e.length>8192)},t.validateConnectionType=function(e){return s.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},t.validateCustomDimensions=function(e){return t.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},t.validateResourceCurrencies=function(e){if(!t.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var i=0;i<e.length;++i)if(!s.stringMatch(e[i],/^[A-Za-z]+$/))return n.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[i]),!1;return!0},t.validateResourceItemTypes=function(e){if(!t.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var i=0;i<e.length;++i)if(!t.validateEventPartCharacters(e[i]))return n.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[i]),!1;return!0},t.validateDimension01=function(e,t){return!e||!!s.stringArrayContainsString(t,e)},t.validateDimension02=function(e,t){return!e||!!s.stringArrayContainsString(t,e)},t.validateDimension03=function(e,t){return!e||!!s.stringArrayContainsString(t,e)},t.validateArrayOfStrings=function(e,t,i,s,o){var r=s;if(r||(r="Array"),!o)return n.w(r+" validation failed: array cannot be null. "),!1;if(0==i&&0==o.length)return n.w(r+" validation failed: array cannot be empty. "),!1;if(e>0&&o.length>e)return n.w(r+" validation failed: array cannot exceed "+e+" values. It has "+o.length+" values."),!1;for(var a=0;a<o.length;++a){var c=o[a]?o[a].length:0;if(0===c)return n.w(r+" validation failed: contained an empty string. Array="+JSON.stringify(o)),!1;if(t>0&&c>t)return n.w(r+" validation failed: a string exceeded max allowed length (which is: "+t+"). String was: "+o[a]),!1}return!0},t.validateFacebookId=function(e){return!!t.validateString(e,!1)||(n.w("Validation fail - facebook id: id cannot be (null), empty or above 64 characters."),!1)},t.validateGender=function(t){if(isNaN(Number(e.EGAGender[t]))){if(t==e.EGAGender.Undefined||t!=e.EGAGender.Male&&t!=e.EGAGender.Female)return n.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+t),!1}else if(t==e.EGAGender[e.EGAGender.Undefined]||t!=e.EGAGender[e.EGAGender.Male]&&t!=e.EGAGender[e.EGAGender.Female])return n.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+t),!1;return!0},t.validateBirthyear=function(e){return!(e<0||e>9999)||(n.w("Validation fail - birthYear: Cannot be (null) or invalid range."),!1)},t.validateClientTs=function(e){return!(e<-4294967294||e>4294967294)},t}();t.GAValidator=o})(e.validators||(e.validators={}))}(s||(s={})),function(e){(function(e){var t=function(){return function(e,t,n){this.name=e,this.value=t,this.version=n}}();e.NameValueVersion=t;var n=function(){return function(e,t){this.name=e,this.version=t}}();e.NameVersion=n;var i=function(){function e(){}return e.touch=function(){},e.getRelevantSdkVersion=function(){return e.sdkGameEngineVersion?e.sdkGameEngineVersion:e.sdkWrapperVersion},e.getConnectionType=function(){return e.connectionType},e.updateConnectionType=function(){navigator.onLine?"ios"===e.buildPlatform||"android"===e.buildPlatform?e.connectionType="wwan":e.connectionType="lan":e.connectionType="offline"},e.getOSVersionString=function(){return e.buildPlatform+" "+e.osVersionPair.version},e.runtimePlatformToString=function(){return e.osVersionPair.name},e.getBrowserVersionString=function(){var t,n=navigator.userAgent,i=n.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==i.length&&"ios"===e.buildPlatform)return"webkit_"+e.osVersion;if(/trident/i.test(i[1]))return"IE "+((t=/\brv[ :]+(\d+)/g.exec(n)||[])[1]||"");if("Chrome"===i[1]&&null!=(t=n.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return t.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(i[1]&&"fbav"===i[1].toLowerCase()&&(i[1]="facebook",i[2]))return"facebook "+i[2];var s=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(t=n.match(/version\/(\d+)/i))&&s.splice(1,1,t[1]),s.join(" ").toLowerCase()},e.getDeviceModel=function(){return"unknown"},e.getDeviceManufacturer=function(){return"unknown"},e.matchItem=function(e,t){var i,s,o,r,a=new n("unknown","0.0.0"),c=0,u=0;for(c=0;c<t.length;c+=1)if(new RegExp(t[c].value,"i").test(e)){if(i=new RegExp(t[c].version+"[- /:;]([\\d._]+)","i"),r="",(s=e.match(i))&&s[1]&&(o=s[1]),o){var d=o.split(/[._]+/);for(u=0;u<Math.min(d.length,3);u+=1)r+=d[u]+(u<Math.min(d.length,3)-1?".":"")}else r="0.0.0";return a.name=t[c].name,a.version=r,a}return a},e.sdkWrapperVersion="javascript 3.1.2",e.osVersionPair=e.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new t("windows_phone","Windows Phone","OS"),new t("windows","Win","NT"),new t("ios","iPhone","OS"),new t("ios","iPad","OS"),new t("ios","iPod","OS"),new t("android","Android","Android"),new t("blackBerry","BlackBerry","/"),new t("mac_osx","Mac","OS X"),new t("tizen","Tizen","Tizen"),new t("linux","Linux","rv")]),e.buildPlatform=e.runtimePlatformToString(),e.deviceModel=e.getDeviceModel(),e.deviceManufacturer=e.getDeviceManufacturer(),e.osVersion=e.getOSVersionString(),e.browserVersion=e.getBrowserVersionString(),e.maxSafeInteger=Math.pow(2,53)-1,e}();e.GADevice=i})(e.device||(e.device={}))}(s||(s={})),function(e){(function(e){var t=function(){function e(t){this.deadline=t,this.ignore=!1,this.async=!1,this.running=!1,this.id=++e.idCounter}return e.idCounter=0,e}();e.TimedBlock=t})(e.threading||(e.threading={}))}(s||(s={})),function(e){(function(e){var t=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,t){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(t)},e.prototype.addQueueOfPriority=function(e){var t=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,n){return t.comparer.compare(e,n)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return this._sortedKeys.length>0},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],t=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),t},e}();e.PriorityQueue=t})(e.threading||(e.threading={}))}(s||(s={})),function(e){(function(t){var n,i,s=e.logging.GALogger;(function(e){e[e.Equal=0]="Equal",e[e.LessOrEqual=1]="LessOrEqual",e[e.NotEqual=2]="NotEqual"})(n=t.EGAStoreArgsOperator||(t.EGAStoreArgsOperator={})),function(e){e[e.Events=0]="Events",e[e.Sessions=1]="Sessions",e[e.Progression=2]="Progression"}(i=t.EGAStore||(t.EGAStore={}));var o=function(){function e(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{"object"==typeof localStorage?(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),e.storageAvailable=!0):e.storageAvailable=!1}catch(e){}}return e.isStorageAvailable=function(){return e.storageAvailable},e.isStoreTooLargeForEvents=function(){return e.instance.eventsStore.length+e.instance.sessionsStore.length>e.MaxNumberOfEntries},e.select=function(t,i,s,o){void 0===i&&(i=[]),void 0===s&&(s=!1),void 0===o&&(o=0);var r=e.getStore(t);if(!r)return null;for(var a=[],c=0;c<r.length;++c){for(var u=r[c],d=!0,l=0;l<i.length;++l){var h=i[l];if(u[h[0]])switch(h[1]){case n.Equal:d=u[h[0]]==h[2];break;case n.LessOrEqual:d=u[h[0]]<=h[2];break;case n.NotEqual:d=u[h[0]]!=h[2];break;default:d=!1}else d=!1;if(!d)break}d&&a.push(u)}return s&&a.sort(function(e,t){return e.client_ts-t.client_ts}),o>0&&a.length>o&&(a=a.slice(0,o+1)),a},e.update=function(t,i,s){void 0===s&&(s=[]);var o=e.getStore(t);if(!o)return!1;for(var r=0;r<o.length;++r){for(var a=o[r],c=!0,u=0;u<s.length;++u){var d=s[u];if(a[d[0]])switch(d[1]){case n.Equal:c=a[d[0]]==d[2];break;case n.LessOrEqual:c=a[d[0]]<=d[2];break;case n.NotEqual:c=a[d[0]]!=d[2];break;default:c=!1}else c=!1;if(!c)break}if(c)for(u=0;u<i.length;++u){var l=i[u];a[l[0]]=l[1]}}return!0},e.delete=function(t,i){var s=e.getStore(t);if(s)for(var o=0;o<s.length;++o){for(var r=s[o],a=!0,c=0;c<i.length;++c){var u=i[c];if(r[u[0]])switch(u[1]){case n.Equal:a=r[u[0]]==u[2];break;case n.LessOrEqual:a=r[u[0]]<=u[2];break;case n.NotEqual:a=r[u[0]]!=u[2];break;default:a=!1}else a=!1;if(!a)break}a&&(s.splice(o,1),--o)}},e.insert=function(t,n,i,s){void 0===i&&(i=!1),void 0===s&&(s=null);var o=e.getStore(t);if(o)if(i){if(!s)return;for(var r=!1,a=0;a<o.length;++a){var c=o[a];if(c[s]==n[s]){for(var u in n)c[u]=n[u];r=!0;break}}r||o.push(n)}else o.push(n)},e.save=function(){e.isStorageAvailable()?(localStorage.setItem(e.KeyPrefix+e.EventsStoreKey,JSON.stringify(e.instance.eventsStore)),localStorage.setItem(e.KeyPrefix+e.SessionsStoreKey,JSON.stringify(e.instance.sessionsStore)),localStorage.setItem(e.KeyPrefix+e.ProgressionStoreKey,JSON.stringify(e.instance.progressionStore)),localStorage.setItem(e.KeyPrefix+e.ItemsStoreKey,JSON.stringify(e.instance.storeItems))):s.w("Storage is not available, cannot save.")},e.load=function(){if(e.isStorageAvailable()){try{e.instance.eventsStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.EventsStoreKey)),e.instance.eventsStore||(e.instance.eventsStore=[])}catch(t){s.w("Load failed for 'events' store. Using empty store."),e.instance.eventsStore=[]}try{e.instance.sessionsStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.SessionsStoreKey)),e.instance.sessionsStore||(e.instance.sessionsStore=[])}catch(t){s.w("Load failed for 'sessions' store. Using empty store."),e.instance.sessionsStore=[]}try{e.instance.progressionStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.ProgressionStoreKey)),e.instance.progressionStore||(e.instance.progressionStore=[])}catch(t){s.w("Load failed for 'progression' store. Using empty store."),e.instance.progressionStore=[]}try{e.instance.storeItems=JSON.parse(localStorage.getItem(e.KeyPrefix+e.ItemsStoreKey)),e.instance.storeItems||(e.instance.storeItems={})}catch(t){s.w("Load failed for 'items' store. Using empty store."),e.instance.progressionStore=[]}}else s.w("Storage is not available, cannot load.")},e.setItem=function(t,n){var i=e.KeyPrefix+t;n?e.instance.storeItems[i]=n:i in e.instance.storeItems&&delete e.instance.storeItems[i]},e.getItem=function(t){var n=e.KeyPrefix+t;return n in e.instance.storeItems?e.instance.storeItems[n]:null},e.getStore=function(t){switch(t){case i.Events:return e.instance.eventsStore;case i.Sessions:return e.instance.sessionsStore;case i.Progression:return e.instance.progressionStore;default:return s.w("GAStore.getStore(): Cannot find store: "+t),null}},e.instance=new e,e.MaxNumberOfEntries=2e3,e.KeyPrefix="GA::",e.EventsStoreKey="ga_event",e.SessionsStoreKey="ga_session",e.ProgressionStoreKey="ga_progression",e.ItemsStoreKey="ga_items",e}();t.GAStore=o})(e.store||(e.store={}))}(s||(s={})),function(e){(function(t){var n=e.validators.GAValidator,i=e.utilities.GAUtilities,s=e.logging.GALogger,o=e.store.GAStore,r=e.device.GADevice,a=e.store.EGAStore,c=e.store.EGAStoreArgsOperator,u=function(){function t(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.commandCenterListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0}return t.setUserId=function(e){t.instance.userId=e,t.cacheIdentifier()},t.getIdentifier=function(){return t.instance.identifier},t.isInitialized=function(){return t.instance.initialized},t.setInitialized=function(e){t.instance.initialized=e},t.getSessionStart=function(){return t.instance.sessionStart},t.getSessionNum=function(){return t.instance.sessionNum},t.getTransactionNum=function(){return t.instance.transactionNum},t.getSessionId=function(){return t.instance.sessionId},t.getCurrentCustomDimension01=function(){return t.instance.currentCustomDimension01},t.getCurrentCustomDimension02=function(){return t.instance.currentCustomDimension02},t.getCurrentCustomDimension03=function(){return t.instance.currentCustomDimension03},t.getGameKey=function(){return t.instance.gameKey},t.getGameSecret=function(){return t.instance.gameSecret},t.getAvailableCustomDimensions01=function(){return t.instance.availableCustomDimensions01},t.setAvailableCustomDimensions01=function(e){n.validateCustomDimensions(e)&&(t.instance.availableCustomDimensions01=e,t.validateAndFixCurrentDimensions(),s.i("Set available custom01 dimension values: ("+i.joinStringArray(e,", ")+")"))},t.getAvailableCustomDimensions02=function(){return t.instance.availableCustomDimensions02},t.setAvailableCustomDimensions02=function(e){n.validateCustomDimensions(e)&&(t.instance.availableCustomDimensions02=e,t.validateAndFixCurrentDimensions(),s.i("Set available custom02 dimension values: ("+i.joinStringArray(e,", ")+")"))},t.getAvailableCustomDimensions03=function(){return t.instance.availableCustomDimensions03},t.setAvailableCustomDimensions03=function(e){n.validateCustomDimensions(e)&&(t.instance.availableCustomDimensions03=e,t.validateAndFixCurrentDimensions(),s.i("Set available custom03 dimension values: ("+i.joinStringArray(e,", ")+")"))},t.getAvailableResourceCurrencies=function(){return t.instance.availableResourceCurrencies},t.setAvailableResourceCurrencies=function(e){n.validateResourceCurrencies(e)&&(t.instance.availableResourceCurrencies=e,s.i("Set available resource currencies: ("+i.joinStringArray(e,", ")+")"))},t.getAvailableResourceItemTypes=function(){return t.instance.availableResourceItemTypes},t.setAvailableResourceItemTypes=function(e){n.validateResourceItemTypes(e)&&(t.instance.availableResourceItemTypes=e,s.i("Set available resource item types: ("+i.joinStringArray(e,", ")+")"))},t.getBuild=function(){return t.instance.build},t.setBuild=function(e){t.instance.build=e,s.i("Set build version: "+e)},t.getUseManualSessionHandling=function(){return t.instance.useManualSessionHandling},t.isEventSubmissionEnabled=function(){return t.instance._isEventSubmissionEnabled},t.prototype.setDefaultId=function(e){this.defaultUserId=e||"",t.cacheIdentifier()},t.getDefaultId=function(){return t.instance.defaultUserId},t.getSdkConfig=function(){var e=0;for(var n in t.instance.sdkConfig)0===e&&(i=n),++e;if(i&&e>0)return t.instance.sdkConfig;var i;e=0;for(var n in t.instance.sdkConfigCached)0===e&&(i=n),++e;return i&&e>0?t.instance.sdkConfigCached:t.instance.sdkConfigDefault},t.isEnabled=function(){var e=t.getSdkConfig();return(!e.enabled||"false"!=e.enabled)&&!!t.instance.initAuthorized},t.setCustomDimension01=function(e){t.instance.currentCustomDimension01=e,o.setItem(t.Dimension01Key,e),s.i("Set custom01 dimension value: "+e)},t.setCustomDimension02=function(e){t.instance.currentCustomDimension02=e,o.setItem(t.Dimension02Key,e),s.i("Set custom02 dimension value: "+e)},t.setCustomDimension03=function(e){t.instance.currentCustomDimension03=e,o.setItem(t.Dimension03Key,e),s.i("Set custom03 dimension value: "+e)},t.setFacebookId=function(e){t.instance.facebookId=e,o.setItem(t.FacebookIdKey,e),s.i("Set facebook id: "+e)},t.setGender=function(n){t.instance.gender=isNaN(Number(e.EGAGender[n]))?e.EGAGender[n].toString().toLowerCase():e.EGAGender[e.EGAGender[n]].toString().toLowerCase(),o.setItem(t.GenderKey,t.instance.gender),s.i("Set gender: "+t.instance.gender)},t.setBirthYear=function(e){t.instance.birthYear=e,o.setItem(t.BirthYearKey,e.toString()),s.i("Set birth year: "+e)},t.incrementSessionNum=function(){var e=t.getSessionNum()+1;t.instance.sessionNum=e},t.incrementTransactionNum=function(){var e=t.getTransactionNum()+1;t.instance.transactionNum=e},t.incrementProgressionTries=function(e){var n=t.getProgressionTries(e)+1;t.instance.progressionTries[e]=n;var i={};i.progression=e,i.tries=n,o.insert(a.Progression,i,!0,"progression")},t.getProgressionTries=function(e){return e in t.instance.progressionTries?t.instance.progressionTries[e]:0},t.clearProgressionTries=function(e){e in t.instance.progressionTries&&delete t.instance.progressionTries[e];var n=[];n.push(["progression",c.Equal,e]),o.delete(a.Progression,n)},t.setKeys=function(e,n){t.instance.gameKey=e,t.instance.gameSecret=n},t.setManualSessionHandling=function(e){t.instance.useManualSessionHandling=e,s.i("Use manual session handling: "+e)},t.setEnabledEventSubmission=function(e){t.instance._isEventSubmissionEnabled=e},t.getEventAnnotations=function(){var e={v:2};e.user_id=t.instance.identifier,e.client_ts=t.getClientTsAdjusted(),e.sdk_version=r.getRelevantSdkVersion(),e.os_version=r.osVersion,e.manufacturer=r.deviceManufacturer,e.device=r.deviceModel,e.browser_version=r.browserVersion,e.platform=r.buildPlatform,e.session_id=t.instance.sessionId,e[t.SessionNumKey]=t.instance.sessionNum;var i=r.getConnectionType();return n.validateConnectionType(i)&&(e.connection_type=i),r.gameEngineVersion&&(e.engine_version=r.gameEngineVersion),t.instance.build&&(e.build=t.instance.build),t.instance.facebookId&&(e[t.FacebookIdKey]=t.instance.facebookId),t.instance.gender&&(e[t.GenderKey]=t.instance.gender),0!=t.instance.birthYear&&(e[t.BirthYearKey]=t.instance.birthYear),e},t.getSdkErrorEventAnnotations=function(){var e={v:2};e.category=t.CategorySdkError,e.sdk_version=r.getRelevantSdkVersion(),e.os_version=r.osVersion,e.manufacturer=r.deviceManufacturer,e.device=r.deviceModel,e.platform=r.buildPlatform;var i=r.getConnectionType();return n.validateConnectionType(i)&&(e.connection_type=i),r.gameEngineVersion&&(e.engine_version=r.gameEngineVersion),e},t.getInitAnnotations=function(){var e={};return e.user_id=t.getIdentifier(),e.sdk_version=r.getRelevantSdkVersion(),e.os_version=r.osVersion,e.platform=r.buildPlatform,e},t.getClientTsAdjusted=function(){var e=i.timeIntervalSince1970(),s=e+t.instance.clientServerTimeOffset;return n.validateClientTs(s)?s:e},t.sessionIsStarted=function(){return 0!=t.instance.sessionStart},t.cacheIdentifier=function(){t.instance.userId?t.instance.identifier=t.instance.userId:t.instance.defaultUserId&&(t.instance.identifier=t.instance.defaultUserId)},t.ensurePersistedStates=function(){o.isStorageAvailable()&&o.load();var e=t.instance;e.setDefaultId(null!=o.getItem(t.DefaultUserIdKey)?o.getItem(t.DefaultUserIdKey):i.createGuid()),e.sessionNum=null!=o.getItem(t.SessionNumKey)?Number(o.getItem(t.SessionNumKey)):0,e.transactionNum=null!=o.getItem(t.TransactionNumKey)?Number(o.getItem(t.TransactionNumKey)):0,e.facebookId?o.setItem(t.FacebookIdKey,e.facebookId):(e.facebookId=null!=o.getItem(t.FacebookIdKey)?o.getItem(t.FacebookIdKey):"",e.facebookId),e.gender?o.setItem(t.GenderKey,e.gender):(e.gender=null!=o.getItem(t.GenderKey)?o.getItem(t.GenderKey):"",e.gender),e.birthYear&&0!=e.birthYear?o.setItem(t.BirthYearKey,e.birthYear.toString()):(e.birthYear=null!=o.getItem(t.BirthYearKey)?Number(o.getItem(t.BirthYearKey)):0,e.birthYear),e.currentCustomDimension01?o.setItem(t.Dimension01Key,e.currentCustomDimension01):(e.currentCustomDimension01=null!=o.getItem(t.Dimension01Key)?o.getItem(t.Dimension01Key):"",e.currentCustomDimension01),e.currentCustomDimension02?o.setItem(t.Dimension02Key,e.currentCustomDimension02):(e.currentCustomDimension02=null!=o.getItem(t.Dimension02Key)?o.getItem(t.Dimension02Key):"",e.currentCustomDimension02),e.currentCustomDimension03?o.setItem(t.Dimension03Key,e.currentCustomDimension03):(e.currentCustomDimension03=null!=o.getItem(t.Dimension03Key)?o.getItem(t.Dimension03Key):"",e.currentCustomDimension03);var n=null!=o.getItem(t.SdkConfigCachedKey)?o.getItem(t.SdkConfigCachedKey):"";if(n){var s=JSON.parse(i.decode64(n));s&&(e.sdkConfigCached=s)}var r=o.select(a.Progression);if(r)for(var c=0;c<r.length;++c){var u=r[c];u&&(e.progressionTries[u.progression]=u.tries)}},t.calculateServerTimeOffset=function(e){return e-i.timeIntervalSince1970()},t.validateAndCleanCustomFields=function(e){var n={};if(e){var o=0;for(var r in e){var a=e[r];if(r&&a)if(o<t.MAX_CUSTOM_FIELDS_COUNT){var c=new RegExp("^[a-zA-Z0-9_]{1,"+t.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(i.stringMatch(r,c)){var u=typeof a;if("string"===u||a instanceof String){var d=a;d.length<=t.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&d.length>0?(n[r]=d,++o):s.w("validateAndCleanCustomFields: entry with key="+r+", value="+a+" has been omitted because its value is an empty string or exceeds the max number of characters ("+t.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")")}else if("number"===u||a instanceof Number){var l=a;n[r]=l,++o}else s.w("validateAndCleanCustomFields: entry with key="+r+", value="+a+" has been omitted because its value is not a string or number")}else s.w("validateAndCleanCustomFields: entry with key="+r+", value="+a+" has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+t.MAX_CUSTOM_FIELDS_KEY_LENGTH+")")}else s.w("validateAndCleanCustomFields: entry with key="+r+", value="+a+" has been omitted because it exceeds the max number of custom fields ("+t.MAX_CUSTOM_FIELDS_COUNT+")");else s.w("validateAndCleanCustomFields: entry with key="+r+", value="+a+" has been omitted because its key or value is null")}}return n},t.validateAndFixCurrentDimensions=function(){n.validateDimension01(t.getCurrentCustomDimension01(),t.getAvailableCustomDimensions01())||t.setCustomDimension01(""),n.validateDimension02(t.getCurrentCustomDimension02(),t.getAvailableCustomDimensions02())||t.setCustomDimension02(""),n.validateDimension03(t.getCurrentCustomDimension03(),t.getAvailableCustomDimensions03())||t.setCustomDimension03("")},t.getConfigurationStringValue=function(e,n){return t.instance.configurations[e]?t.instance.configurations[e].toString():n},t.isCommandCenterReady=function(){return t.instance.commandCenterIsReady},t.addCommandCenterListener=function(e){t.instance.commandCenterListeners.indexOf(e)<0&&t.instance.commandCenterListeners.push(e)},t.removeCommandCenterListener=function(e){var n=t.instance.commandCenterListeners.indexOf(e);n>-1&&t.instance.commandCenterListeners.splice(n,1)},t.getConfigurationsContentAsString=function(){return JSON.stringify(t.instance.configurations)},t.populateConfigurations=function(e){var n=e.configurations;if(n)for(var i=0;i<n.length;++i){var s=n[i];if(s){var o=s.key,r=s.value,a=s.start?s.start:Number.MIN_VALUE,c=s.end?s.end:Number.MAX_VALUE,u=t.getClientTsAdjusted();o&&r&&u>a&&u<c&&(t.instance.configurations[o]=r)}}t.instance.commandCenterIsReady=!0;var d=t.instance.commandCenterListeners;for(i=0;i<d.length;++i)d[i]&&d[i].onCommandCenterUpdated()},t.CategorySdkError="sdk_error",t.MAX_CUSTOM_FIELDS_COUNT=50,t.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,t.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,t.instance=new t,t.DefaultUserIdKey="default_user_id",t.SessionNumKey="session_num",t.TransactionNumKey="transaction_num",t.FacebookIdKey="facebook_id",t.GenderKey="gender",t.BirthYearKey="birth_year",t.Dimension01Key="dimension01",t.Dimension02Key="dimension02",t.Dimension03Key="dimension03",t.SdkConfigCachedKey="sdk_config_cached",t}();t.GAState=u})(e.state||(e.state={}))}(s||(s={})),function(e){(function(t){var n=e.utilities.GAUtilities,i=e.logging.GALogger,s=function(){function e(){}return e.execute=function(t,s,o,r){if(e.countMap[s]||(e.countMap[s]=0),!(e.countMap[s]>=e.MaxCount)){var a=n.getHmac(r,o),c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState){if(!c.responseText)return;if(200!=c.status)return void i.w("sdk error failed. response code not 200. status code: "+c.status+", description: "+c.statusText+", body: "+c.responseText);e.countMap[s]=e.countMap[s]+1}},c.open("POST",t,!0),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("Authorization",a);try{c.send(o)}catch(e){console.error(e)}}},e.MaxCount=10,e.countMap={},e}();t.SdkErrorTask=s})(e.tasks||(e.tasks={}))}(s||(s={})),function(e){(function(t){var n=e.state.GAState,i=e.logging.GALogger,s=e.utilities.GAUtilities,o=e.validators.GAValidator,r=e.tasks.SdkErrorTask,a=function(){function e(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return e.prototype.requestInit=function(i){var s=n.getGameKey(),o=(this.baseUrl,this.initializeUrlPath);o="https://rubick.gameanalytics.com/v2/command_center?game_key="+s+"&interval_seconds=1000000";var r=n.getInitAnnotations(),a=JSON.stringify(r);if(a){var c=this.createPayloadData(a,this.useGzip),u=[];u.push(a),e.sendRequest(o,c,u,this.useGzip,e.initRequestCallback,i)}else i(t.EGAHTTPApiResponse.JsonEncodeFailed,null)},e.prototype.sendEventsInArray=function(i,s,o){if(0!=i.length){var r=n.getGameKey(),a=this.baseUrl+"/"+r+"/"+this.eventsUrlPath,c=JSON.stringify(i);if(c){var u=this.createPayloadData(c,this.useGzip),d=[];d.push(c),d.push(s),d.push(i.length.toString()),e.sendRequest(a,u,d,this.useGzip,e.sendEventInArrayRequestCallback,o)}else o(t.EGAHTTPApiResponse.JsonEncodeFailed,null,s,i.length)}},e.prototype.sendSdkErrorEvent=function(t){if(n.isEventSubmissionEnabled()){var s=n.getGameKey(),a=n.getGameSecret();if(o.validateSdkErrorEvent(s,a,t)){var c,u=this.baseUrl+"/"+s+"/"+this.eventsUrlPath,d=n.getSdkErrorEventAnnotations(),l=e.sdkErrorTypeToString(t);d.type=l;var h=[];h.push(d),(c=JSON.stringify(h))?r.execute(u,t,c,a):i.w("sendSdkErrorEvent: JSON encoding failed.")}}},e.sendEventInArrayRequestCallback=function(n,i,s,o){void 0===o&&(o=null);o[0],o[1];var r,a,c=o[2],u=parseInt(o[3]);r=n.responseText,a=n.status;var d=e.instance.processRequestResponse(a,n.statusText,r,"Events");if(d==t.EGAHTTPApiResponse.Ok||d==t.EGAHTTPApiResponse.BadRequest){var l=r?JSON.parse(r):{};null!=l?(t.EGAHTTPApiResponse.BadRequest,s(d,l,c,u)):s(t.EGAHTTPApiResponse.JsonDecodeFailed,null,c,u)}else s(d,null,c,u)},e.sendRequest=function(e,t,i,o,r,a){var c=new XMLHttpRequest,u=n.getGameSecret(),d=s.getHmac(u,t),l=[];for(var h in l.push(d),i)l.push(i[h]);if(c.onreadystatechange=function(){4===c.readyState&&r(c,e,a,l)},c.open("POST",e,!0),c.setRequestHeader("Content-Type","text/plain"),c.setRequestHeader("Authorization",d),o)throw new Error("gzip not supported");try{c.send(t)}catch(e){console.error(e.stack)}},e.initRequestCallback=function(n,i,s,r){void 0===r&&(r=null);var a,c;r[0],r[1];a=n.responseText,c=n.status;var u=a?JSON.parse(a):{},d=e.instance.processRequestResponse(c,n.statusText,a,"Init");if(d==t.EGAHTTPApiResponse.Ok||d==t.EGAHTTPApiResponse.BadRequest)if(null!=u)if(d!==t.EGAHTTPApiResponse.BadRequest){var l=o.validateAndCleanInitRequestResponse(u);l?s(t.EGAHTTPApiResponse.Ok,l,"",0):s(t.EGAHTTPApiResponse.BadResponse,null,"",0)}else s(d,null,"",0);else s(t.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0);else s(d,null,"",0)},e.prototype.createPayloadData=function(e,t){if(t)throw new Error("gzip not supported");return e},e.prototype.processRequestResponse=function(e,n,i,s){return i?200===e?t.EGAHTTPApiResponse.Ok:0===e||401===e?t.EGAHTTPApiResponse.Unauthorized:400===e?t.EGAHTTPApiResponse.BadRequest:500===e?t.EGAHTTPApiResponse.InternalServerError:t.EGAHTTPApiResponse.UnknownResponseCode:t.EGAHTTPApiResponse.NoResponse},e.sdkErrorTypeToString=function(e){switch(e){case t.EGASdkErrorType.Rejected:return"rejected";default:return""}},e.instance=new e,e}();t.GAHTTPApi=a})(e.http||(e.http={}))}(s||(s={})),function(e){(function(t){var n=e.store.GAStore,i=e.store.EGAStore,s=e.store.EGAStoreArgsOperator,o=e.state.GAState,r=e.logging.GALogger,a=e.utilities.GAUtilities,c=e.http.EGAHTTPApiResponse,u=e.http.GAHTTPApi,d=e.validators.GAValidator,l=e.http.EGASdkErrorType,h=function(){function t(){}return t.addSessionStartEvent=function(){if(o.isEventSubmissionEnabled()){var e={};e.category=t.CategorySessionStart,o.incrementSessionNum(),n.setItem(o.SessionNumKey,o.getSessionNum().toString()),t.addDimensionsToEvent(e),t.addEventToStore(e),r.i("Add SESSION START event"),t.processEvents(t.CategorySessionStart,!1)}},t.addSessionEndEvent=function(){if(o.isEventSubmissionEnabled()){var e=o.getSessionStart(),n=o.getClientTsAdjusted()-e;n<0&&(r.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),n=0);var i={};i.category=t.CategorySessionEnd,i.length=n,t.addDimensionsToEvent(i),t.addEventToStore(i),r.i("Add SESSION END event."),t.processEvents("",!1)}},t.addBusinessEvent=function(e,i,s,a,c,h){if(void 0===c&&(c=null),o.isEventSubmissionEnabled())if(d.validateBusinessEvent(e,i,c,s,a)){var f={};o.incrementTransactionNum(),n.setItem(o.TransactionNumKey,o.getTransactionNum().toString()),f.event_id=s+":"+a,f.category=t.CategoryBusiness,f.currency=e,f.amount=i,f[o.TransactionNumKey]=o.getTransactionNum(),c&&(f.cart_type=c),t.addDimensionsToEvent(f),t.addFieldsToEvent(f,o.validateAndCleanCustomFields(h)),r.i("Add BUSINESS event: {currency:"+e+", amount:"+i+", itemType:"+s+", itemId:"+a+", cartType:"+c+"}"),t.addEventToStore(f)}else u.instance.sendSdkErrorEvent(l.Rejected)},t.addResourceEvent=function(n,i,s,a,c,h){if(o.isEventSubmissionEnabled())if(d.validateResourceEvent(n,i,s,a,c,o.getAvailableResourceCurrencies(),o.getAvailableResourceItemTypes())){n===e.EGAResourceFlowType.Sink&&(s*=-1);var f={},v=t.resourceFlowTypeToString(n);f.event_id=v+":"+i+":"+a+":"+c,f.category=t.CategoryResource,f.amount=s,t.addDimensionsToEvent(f),t.addFieldsToEvent(f,o.validateAndCleanCustomFields(h)),r.i("Add RESOURCE event: {currency:"+i+", amount:"+s+", itemType:"+a+", itemId:"+c+"}"),t.addEventToStore(f)}else u.instance.sendSdkErrorEvent(l.Rejected)},t.addProgressionEvent=function(n,i,s,a,c,h,f){if(o.isEventSubmissionEnabled()){var v=t.progressionStatusToString(n);if(d.validateProgressionEvent(n,i,s,a)){var m,g={};m=s?a?i+":"+s+":"+a:i+":"+s:i,g.category=t.CategoryProgression,g.event_id=v+":"+m;var p=0;h&&n!=e.EGAProgressionStatus.Start&&(g.score=c),n===e.EGAProgressionStatus.Fail&&o.incrementProgressionTries(m),n===e.EGAProgressionStatus.Complete&&(o.incrementProgressionTries(m),p=o.getProgressionTries(m),g.attempt_num=p,o.clearProgressionTries(m)),t.addDimensionsToEvent(g),t.addFieldsToEvent(g,o.validateAndCleanCustomFields(f)),r.i("Add PROGRESSION event: {status:"+v+", progression01:"+i+", progression02:"+s+", progression03:"+a+", score:"+c+", attempt:"+p+"}"),t.addEventToStore(g)}else u.instance.sendSdkErrorEvent(l.Rejected)}},t.addDesignEvent=function(e,n,i,s){if(o.isEventSubmissionEnabled())if(d.validateDesignEvent(e,n)){var a={};a.category=t.CategoryDesign,a.event_id=e,i&&(a.value=n),t.addDimensionsToEvent(a),t.addFieldsToEvent(a,o.validateAndCleanCustomFields(s)),r.i("Add DESIGN event: {eventId:"+e+", value:"+n+"}"),t.addEventToStore(a)}else u.instance.sendSdkErrorEvent(l.Rejected)},t.addErrorEvent=function(e,n,i){if(o.isEventSubmissionEnabled()){var s=t.errorSeverityToString(e);if(d.validateErrorEvent(e,n)){var a={};a.category=t.CategoryError,a.severity=s,a.message=n,t.addDimensionsToEvent(a),t.addFieldsToEvent(a,o.validateAndCleanCustomFields(i)),r.i("Add ERROR event: {severity:"+s+", message:"+n+"}"),t.addEventToStore(a)}else u.instance.sendSdkErrorEvent(l.Rejected)}},t.processEvents=function(e,c){if(o.isEventSubmissionEnabled())try{var d=a.createGuid();c&&(t.cleanupEvents(),t.fixMissingSessionEndEvents());var l=[];l.push(["status",s.Equal,"new"]);var h=[];h.push(["status",s.Equal,"new"]),e&&(l.push(["category",s.Equal,e]),h.push(["category",s.Equal,e]));var f=[];f.push(["status",d]);var v=n.select(i.Events,l);if(!v||0==v.length)return r.i("Event queue: No events to send"),void t.updateSessionStore();if(v.length>t.MaxEventCount){if(!(v=n.select(i.Events,l,!0,t.MaxEventCount)))return;var m=v[v.length-1].client_ts;if(l.push(["client_ts",s.LessOrEqual,m]),!(v=n.select(i.Events,l)))return;h.push(["client_ts",s.LessOrEqual,m])}if(r.i("Event queue: Sending "+v.length+" events."),!n.update(i.Events,f,h))return;for(var g=[],p=0;p<v.length;++p){var y=v[p],S=JSON.parse(a.decode64(y.event));0!=S.length&&g.push(S)}u.instance.sendEventsInArray(g,d,t.processEventsCallback)}catch(e){r.e("Error during ProcessEvents(): "+e.stack)}},t.processEventsCallback=function(e,t,o,a){var u=[];if(u.push(["status",s.Equal,o]),e===c.Ok)n.delete(i.Events,u),r.i("Event queue: "+a+" events sent.");else if(e===c.NoResponse){var d=[];d.push(["status","new"]),r.w("Event queue: Failed to send events to collector - Retrying next time"),n.update(i.Events,d,u)}else{if(t){var l,h=0;for(var f in t)0==h&&(l=t[f]),++h;e===c.BadRequest&&l.constructor===Array?r.w("Event queue: "+a+" events sent. "+h+" events failed GA server validation."):r.w("Event queue: Failed to send events.")}else r.w("Event queue: Failed to send events.");n.delete(i.Events,u)}},t.cleanupEvents=function(){n.update(i.Events,[["status","new"]])},t.fixMissingSessionEndEvents=function(){if(o.isEventSubmissionEnabled()){var e=[];e.push(["session_id",s.NotEqual,o.getSessionId()]);var c=n.select(i.Sessions,e);if(c&&0!=c.length){r.i(c.length+" session(s) located with missing session_end event.");for(var u=0;u<c.length;++u){var d=JSON.parse(a.decode64(c[u].event)),l=d.client_ts-c[u].timestamp;l=Math.max(0,l),d.category=t.CategorySessionEnd,d.length=l,t.addEventToStore(d)}}}},t.addEventToStore=function(e){if(o.isEventSubmissionEnabled())if(o.isInitialized())try{if(n.isStoreTooLargeForEvents()&&!a.stringMatch(e.category,/^(user|session_end|business)$/))return void r.w("Database too large. Event has been blocked.");var c=o.getEventAnnotations(),u=a.encode64(JSON.stringify(c));for(var d in e)c[d]=e[d];var l=JSON.stringify(c);r.ii("Event added to queue: "+l);var h={status:"new"};h.category=c.category,h.session_id=c.session_id,h.client_ts=c.client_ts,h.event=a.encode64(JSON.stringify(c)),n.insert(i.Events,h),e.category==t.CategorySessionEnd?n.delete(i.Sessions,[["session_id",s.Equal,c.session_id]]):((h={}).session_id=c.session_id,h.timestamp=o.getSessionStart(),h.event=u,n.insert(i.Sessions,h,!0,"session_id")),n.isStorageAvailable()&&n.save()}catch(d){r.e("addEventToStore: error"),r.e(d.stack)}else r.w("Could not add event: SDK is not initialized")},t.updateSessionStore=function(){if(o.sessionIsStarted()){var e={};e.session_id=o.instance.sessionId,e.timestamp=o.getSessionStart(),e.event=a.encode64(JSON.stringify(o.getEventAnnotations())),n.insert(i.Sessions,e,!0,"session_id"),n.isStorageAvailable()&&n.save()}},t.addDimensionsToEvent=function(e){e&&(o.getCurrentCustomDimension01()&&(e.custom_01=o.getCurrentCustomDimension01()),o.getCurrentCustomDimension02()&&(e.custom_02=o.getCurrentCustomDimension02()),o.getCurrentCustomDimension03()&&(e.custom_03=o.getCurrentCustomDimension03()))},t.addFieldsToEvent=function(e,t){e&&t&&Object.keys(t).length>0&&(e.custom_fields=t)},t.resourceFlowTypeToString=function(t){return t==e.EGAResourceFlowType.Source||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Source]?"Source":t==e.EGAResourceFlowType.Sink||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Sink]?"Sink":""},t.progressionStatusToString=function(t){return t==e.EGAProgressionStatus.Start||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Start]?"Start":t==e.EGAProgressionStatus.Complete||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Complete]?"Complete":t==e.EGAProgressionStatus.Fail||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Fail]?"Fail":""},t.errorSeverityToString=function(t){return t==e.EGAErrorSeverity.Debug||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Debug]?"debug":t==e.EGAErrorSeverity.Info||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Info]?"info":t==e.EGAErrorSeverity.Warning||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Warning]?"warning":t==e.EGAErrorSeverity.Error||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Error]?"error":t==e.EGAErrorSeverity.Critical||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Critical]?"critical":""},t.instance=new t,t.CategorySessionStart="user",t.CategorySessionEnd="session_end",t.CategoryDesign="design",t.CategoryBusiness="business",t.CategoryProgression="progression",t.CategoryResource="resource",t.CategoryError="error",t.MaxEventCount=500,t}();t.GAEvents=h})(e.events||(e.events={}))}(s||(s={})),function(e){(function(t){var n=e.logging.GALogger,i=e.state.GAState,s=e.events.GAEvents,o=function(){function e(){this.blocks=new t.PriorityQueue({compare:function(e,t){return e-t}}),this.id2TimedBlockMap={},e.startThread()}return e.createTimedBlock=function(e){void 0===e&&(e=0);var n=new Date;return n.setSeconds(n.getSeconds()+e),new t.TimedBlock(n)},e.performTaskOnGAThread=function(n,i){void 0===i&&(i=0);var s=new Date;s.setSeconds(s.getSeconds()+i);var o=new t.TimedBlock(s);o.block=n,e.instance.id2TimedBlockMap[o.id]=o,e.instance.addTimedBlock(o)},e.performTimedBlockOnGAThread=function(t){e.instance.id2TimedBlockMap[t.id]=t,e.instance.addTimedBlock(t)},e.scheduleTimer=function(n,i){var s=new Date;s.setSeconds(s.getSeconds()+n);var o=new t.TimedBlock(s);return o.block=i,e.instance.id2TimedBlockMap[o.id]=o,e.instance.addTimedBlock(o),o.id},e.getTimedBlockById=function(t){return t in e.instance.id2TimedBlockMap?e.instance.id2TimedBlockMap[t]:null},e.ensureEventQueueIsRunning=function(){e.instance.keepRunning=!0,e.instance.isRunning||(e.instance.isRunning=!0,e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue))},e.endSessionAndStopQueue=function(){i.isInitialized()&&(n.i("Ending session."),e.stopEventQueue(),i.isEnabled()&&i.sessionIsStarted()&&(s.addSessionEndEvent(),i.instance.sessionStart=0))},e.stopEventQueue=function(){e.instance.keepRunning=!1},e.ignoreTimer=function(t){t in e.instance.id2TimedBlockMap&&(e.instance.id2TimedBlockMap[t].ignore=!0)},e.setEventProcessInterval=function(t){t>0&&(e.ProcessEventsIntervalInSeconds=t)},e.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},e.run=function(){clearTimeout(e.runTimeoutId);try{for(var t;t=e.getNextBlock();)if(!t.ignore)if(t.async){if(!t.running){t.running=!0,t.block();break}}else t.block();return void(e.runTimeoutId=setTimeout(e.run,e.ThreadWaitTimeInMs))}catch(e){n.e("Error on GA thread"),n.e(e.stack)}},e.startThread=function(){e.runTimeoutId=setTimeout(e.run,0)},e.getNextBlock=function(){var t=new Date;return e.instance.blocks.hasItems()&&e.instance.blocks.peek().deadline.getTime()<=t.getTime()?e.instance.blocks.peek().async&&e.instance.blocks.peek().running?e.instance.blocks.peek():e.instance.blocks.dequeue():null},e.processEventQueue=function(){s.processEvents("",!0),e.instance.keepRunning?e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue):e.instance.isRunning=!1},e.instance=new e,e.ThreadWaitTimeInMs=1e3,e.ProcessEventsIntervalInSeconds=8,e}();t.GAThreading=o})(e.threading||(e.threading={}))}(s||(s={})),function(e){var t=e.threading.GAThreading,n=e.logging.GALogger,i=e.store.GAStore,s=e.state.GAState,o=e.http.GAHTTPApi,r=e.device.GADevice,a=e.validators.GAValidator,c=e.http.EGAHTTPApiResponse,u=e.utilities.GAUtilities,d=e.events.GAEvents,l=function(){function l(){}return l.init=function(){if(r.touch(),l.methodMap.configureAvailableCustomDimensions01=l.configureAvailableCustomDimensions01,l.methodMap.configureAvailableCustomDimensions02=l.configureAvailableCustomDimensions02,l.methodMap.configureAvailableCustomDimensions03=l.configureAvailableCustomDimensions03,l.methodMap.configureAvailableResourceCurrencies=l.configureAvailableResourceCurrencies,l.methodMap.configureAvailableResourceItemTypes=l.configureAvailableResourceItemTypes,l.methodMap.configureBuild=l.configureBuild,l.methodMap.configureSdkGameEngineVersion=l.configureSdkGameEngineVersion,l.methodMap.configureGameEngineVersion=l.configureGameEngineVersion,l.methodMap.configureUserId=l.configureUserId,l.methodMap.initialize=l.initialize,l.methodMap.addBusinessEvent=l.addBusinessEvent,l.methodMap.addResourceEvent=l.addResourceEvent,l.methodMap.addProgressionEvent=l.addProgressionEvent,l.methodMap.addDesignEvent=l.addDesignEvent,l.methodMap.addErrorEvent=l.addErrorEvent,l.methodMap.addErrorEvent=l.addErrorEvent,l.methodMap.setEnabledInfoLog=l.setEnabledInfoLog,l.methodMap.setEnabledVerboseLog=l.setEnabledVerboseLog,l.methodMap.setEnabledManualSessionHandling=l.setEnabledManualSessionHandling,l.methodMap.setEnabledEventSubmission=l.setEnabledEventSubmission,l.methodMap.setCustomDimension01=l.setCustomDimension01,l.methodMap.setCustomDimension02=l.setCustomDimension02,l.methodMap.setCustomDimension03=l.setCustomDimension03,l.methodMap.setFacebookId=l.setFacebookId,l.methodMap.setGender=l.setGender,l.methodMap.setBirthYear=l.setBirthYear,l.methodMap.setEventProcessInterval=l.setEventProcessInterval,l.methodMap.startSession=l.startSession,l.methodMap.endSession=l.endSession,l.methodMap.onStop=l.onStop,l.methodMap.onResume=l.onResume,l.methodMap.addCommandCenterListener=l.addCommandCenterListener,l.methodMap.removeCommandCenterListener=l.removeCommandCenterListener,l.methodMap.getCommandCenterValueAsString=l.getCommandCenterValueAsString,l.methodMap.isCommandCenterReady=l.isCommandCenterReady,l.methodMap.getConfigurationsContentAsString=l.getConfigurationsContentAsString,"undefined"!=typeof window&&void 0!==window.GameAnalytics&&void 0!==window.GameAnalytics.q){var e=window.GameAnalytics.q;for(var t in e)l.gaCommand.apply(null,e[t])}},l.gaCommand=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.length>0&&t[0]in e.GameAnalytics.methodMap&&(t.length>1?e.GameAnalytics.methodMap[t[0]].apply(null,Array.prototype.slice.call(t,1)):e.GameAnalytics.methodMap[t[0]]())},l.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?n.w("Available custom dimensions must be set before SDK is initialized"):s.setAvailableCustomDimensions01(e)})},l.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?n.w("Available custom dimensions must be set before SDK is initialized"):s.setAvailableCustomDimensions02(e)})},l.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?n.w("Available custom dimensions must be set before SDK is initialized"):s.setAvailableCustomDimensions03(e)})},l.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?n.w("Available resource currencies must be set before SDK is initialized"):s.setAvailableResourceCurrencies(e)})},l.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?n.w("Available resource item types must be set before SDK is initialized"):s.setAvailableResourceItemTypes(e)})},l.configureBuild=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?n.w("Build version must be set before SDK is initialized."):a.validateBuild(e)?s.setBuild(e):n.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},l.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)||(a.validateSdkWrapperVersion(e)?r.sdkGameEngineVersion=e:n.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e))})},l.configureGameEngineVersion=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)||(a.validateEngineVersion(e)?r.gameEngineVersion=e:n.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e))})},l.configureUserId=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?n.w("A custom user id must be set before SDK is initialized."):a.validateUserId(e)?s.setUserId(e):n.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},l.initialize=function(e,i){void 0===e&&(e=""),void 0===i&&(i=""),r.updateConnectionType();var o=t.createTimedBlock();o.async=!0,l.initTimedBlockId=o.id,o.block=function(){l.isSdkReady(!0,!1)?n.w("SDK already initialized. Can only be called once."):a.validateKeys(e,i)?(s.setKeys(e,i),l.internalInitialize()):n.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+i)},t.performTimedBlockOnGAThread(o)},l.addBusinessEvent=function(e,n,i,s,o){void 0===e&&(e=""),void 0===n&&(n=0),void 0===i&&(i=""),void 0===s&&(s=""),void 0===o&&(o=""),r.updateConnectionType(),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add business event")&&d.addBusinessEvent(e,n,i,s,o,{})})},l.addResourceEvent=function(n,i,s,o,a){void 0===n&&(n=e.EGAResourceFlowType.Undefined),void 0===i&&(i=""),void 0===s&&(s=0),void 0===o&&(o=""),void 0===a&&(a=""),r.updateConnectionType(),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add resource event")&&d.addResourceEvent(n,i,s,o,a,{})})},l.addProgressionEvent=function(n,i,s,o,a){void 0===n&&(n=e.EGAProgressionStatus.Undefined),void 0===i&&(i=""),void 0===s&&(s=""),void 0===o&&(o=""),r.updateConnectionType(),t.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!0,"Could not add progression event")){var e="number"==typeof a;d.addProgressionEvent(n,i,s,o,e?a:0,e,{})}})},l.addDesignEvent=function(e,n){r.updateConnectionType(),t.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!0,"Could not add design event")){var t="number"==typeof n;d.addDesignEvent(e,t?n:0,t,{})}})},l.addErrorEvent=function(n,i){void 0===n&&(n=e.EGAErrorSeverity.Undefined),void 0===i&&(i=""),r.updateConnectionType(),t.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add error event")&&d.addErrorEvent(n,i,{})})},l.setEnabledInfoLog=function(e){void 0===e&&(e=!1),t.performTaskOnGAThread(function(){e?(n.setInfoLog(e),n.i("Info logging enabled")):(n.i("Info logging disabled"),n.setInfoLog(e))})},l.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),t.performTaskOnGAThread(function(){e?(n.setVerboseLog(e),n.i("Verbose logging enabled")):(n.i("Verbose logging disabled"),n.setVerboseLog(e))})},l.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),t.performTaskOnGAThread(function(){s.setManualSessionHandling(e)})},l.setEnabledEventSubmission=function(e){void 0===e&&(e=!1),t.performTaskOnGAThread(function(){e?(s.setEnabledEventSubmission(e),n.i("Event submission enabled")):(n.i("Event submission disabled"),s.setEnabledEventSubmission(e))})},l.setCustomDimension01=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){a.validateDimension01(e,s.getAvailableCustomDimensions01())?s.setCustomDimension01(e):n.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values")})},l.setCustomDimension02=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){a.validateDimension02(e,s.getAvailableCustomDimensions02())?s.setCustomDimension02(e):n.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values")})},l.setCustomDimension03=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){a.validateDimension03(e,s.getAvailableCustomDimensions03())?s.setCustomDimension03(e):n.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values")})},l.setFacebookId=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){a.validateFacebookId(e)&&s.setFacebookId(e)})},l.setGender=function(n){void 0===n&&(n=e.EGAGender.Undefined),t.performTaskOnGAThread(function(){a.validateGender(n)&&s.setGender(n)})},l.setBirthYear=function(e){void 0===e&&(e=0),t.performTaskOnGAThread(function(){a.validateBirthyear(e)&&s.setBirthYear(e)})},l.setEventProcessInterval=function(e){t.performTaskOnGAThread(function(){t.setEventProcessInterval(e)})},l.startSession=function(){if(s.isInitialized()){var e=t.createTimedBlock();e.async=!0,l.initTimedBlockId=e.id,e.block=function(){s.isEnabled()&&s.sessionIsStarted()&&t.endSessionAndStopQueue(),l.resumeSessionAndStartQueue()},t.performTimedBlockOnGAThread(e)}},l.endSession=function(){l.onStop()},l.onStop=function(){t.performTaskOnGAThread(function(){try{t.endSessionAndStopQueue()}catch(e){}})},l.onResume=function(){var e=t.createTimedBlock();e.async=!0,l.initTimedBlockId=e.id,e.block=function(){l.resumeSessionAndStartQueue()},t.performTimedBlockOnGAThread(e)},l.getCommandCenterValueAsString=function(e,t){return void 0===t&&(t=null),s.getConfigurationStringValue(e,t)},l.isCommandCenterReady=function(){return s.isCommandCenterReady()},l.addCommandCenterListener=function(e){s.addCommandCenterListener(e)},l.removeCommandCenterListener=function(e){s.removeCommandCenterListener(e)},l.getConfigurationsContentAsString=function(){return s.getConfigurationsContentAsString()},l.internalInitialize=function(){s.ensurePersistedStates(),i.setItem(s.DefaultUserIdKey,s.getDefaultId()),s.setInitialized(!0),l.newSession(),s.isEnabled()&&t.ensureEventQueueIsRunning()},l.newSession=function(){n.i("Starting a new session."),s.validateAndFixCurrentDimensions(),o.instance.requestInit(l.startNewSessionCallback)},l.startNewSessionCallback=function(e,o){if(e===c.Ok&&o){var r=0;if(o.server_ts){var a=o.server_ts;r=s.calculateServerTimeOffset(a)}o.time_offset=r,i.setItem(s.SdkConfigCachedKey,u.encode64(JSON.stringify(o))),s.instance.sdkConfigCached=o,s.instance.sdkConfig=o,s.instance.initAuthorized=!0}else e==c.Unauthorized?(n.w("Initialize SDK failed - Unauthorized"),s.instance.initAuthorized=!1):(e===c.NoResponse||e===c.RequestTimeout?n.i("Init call (session start) failed - no response. Could be offline or timeout."):e===c.BadResponse||e===c.JsonEncodeFailed||e===c.JsonDecodeFailed?n.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==c.BadRequest&&e!==c.UnknownResponseCode||n.i("Init call (session start) failed - bad request or unknown response."),null==s.instance.sdkConfig?null!=s.instance.sdkConfigCached?(n.i("Init call (session start) failed - using cached init values."),s.instance.sdkConfig=s.instance.sdkConfigCached):(n.i("Init call (session start) failed - using default init values."),s.instance.sdkConfig=s.instance.sdkConfigDefault):n.i("Init call (session start) failed - using cached init values."),s.instance.initAuthorized=!0);if(s.instance.clientServerTimeOffset=s.getSdkConfig().time_offset?s.getSdkConfig().time_offset:0,s.populateConfigurations(s.getSdkConfig()),!s.isEnabled())return n.w("Could not start session: SDK is disabled."),void t.stopEventQueue();t.ensureEventQueueIsRunning();var h=u.createGuid();s.instance.sessionId=h,s.instance.sessionStart=s.getClientTsAdjusted(),d.addSessionStartEvent();var f=t.getTimedBlockById(l.initTimedBlockId);null!=f&&(f.running=!1),l.initTimedBlockId=-1},l.resumeSessionAndStartQueue=function(){s.isInitialized()&&(n.i("Resuming session."),s.sessionIsStarted()||l.newSession())},l.isSdkReady=function(e,t,i){return void 0===t&&(t=!0),void 0===i&&(i=""),i&&(i+=": "),e&&!s.isInitialized()?(t&&n.w(i+"SDK is not initialized"),!1):e&&!s.isEnabled()?(t&&n.w(i+"SDK is disabled"),!1):!(e&&!s.sessionIsStarted())||(t&&n.w(i+"Session has not started yet"),!1)},l.initTimedBlockId=-1,l.methodMap={},l}();e.GameAnalytics=l}(s||(s={})),s.GameAnalytics.init();s.GameAnalytics.gaCommand;t.exports=s},{}],CustomMaterial:[function(e,t,n){"use strict";cc._RF.push(t,"cfce5sjVaJMCaopVI6IQgvZ","CustomMaterial");var i=cc.renderer.renderEngine,s=i.renderer,o=i.gfx,r=i.Material,a={"2d":s.PARAM_TEXTURE_2D,"1f":s.PARAM_FLOAT,"2f":s.PARAM_FLOAT2,"4f":s.PARAM_FLOAT4};function c(e){var t=[{name:"texture",type:s.PARAM_TEXTURE_2D},{name:"color",type:s.PARAM_COLOR4}];if(e){var n=!0,i=!1,o=void 0;try{for(var r,c=e[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var u=r.value;for(var d in a)u.endsWith(d)&&t.push({name:u,type:a[d]})}}catch(e){i=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}}return t}var u=function(e){function t(t){e.call(this,!1);var n=new s.Pass(t.name);n.setDepth(!1,!1),n.setCullMode(o.CULL_NONE),n.setBlend(o.BLEND_FUNC_ADD,o.BLEND_SRC_ALPHA,o.BLEND_ONE_MINUS_SRC_ALPHA,o.BLEND_FUNC_ADD,o.BLEND_SRC_ALPHA,o.BLEND_ONE_MINUS_SRC_ALPHA);var i=new s.Technique(["transparent"],c(t.params),[n]);this._color={r:1,g:1,b:1,a:1},this._effect=new s.Effect([i],{color:this._color},[]),this._mainTech=i,this._texture=null}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={effect:{configurable:!0},texture:{configurable:!0},color:{configurable:!0}};return n.effect.get=function(){return this._effect},n.texture.get=function(){return this._texture},n.texture.set=function(e){this._texture!==e&&(this._texture=e,this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId())},n.color.get=function(){return this._color},n.color.set=function(e){var t=this._color;t.r=e.r/255,t.g=e.g/255,t.b=e.b/255,t.a=e.a/255,this._effect.setProperty("color",t)},t.prototype.clone=function(){var e=new t;return e._mainTech.copy(this._mainTech),e.texture=this.texture,e.color=this.color,e.updateHash(),e},t.prototype.setParam=function(e,t){t instanceof cc.Texture2D?(this._effect.setProperty(e,t.getImpl()),this._texIds[e]=t.getId()):this._effect.setProperty(e,t)},Object.defineProperties(t.prototype,n),t}(r);t.exports=u,cc._RF.pop()},{}],GAPlugin:[function(e,t,n){"use strict";cc._RF.push(t,"ac68bTjQa1EM7O5nxg4MFV7","GAPlugin");var i=e("gameanalytics"),s=e("GameEvent");cc.Class({extends:cc.Component,properties:{key:"game key",secret:"secret key",version:"0.0.1"},start:function(){i.GameAnalytics.configureAvailableResourceCurrencies(["coin"]),i.GameAnalytics.configureAvailableResourceItemTypes(["kill","item"]),i.GameAnalytics.configureAvailableCustomDimensions01(["headshot","armor"]),i.GameAnalytics.configureBuild(this.version),i.GameAnalytics.initialize(this.key,this.secret),s.GAME_START.push(this.onGameStart.bind(this)),s.GAME_OVER.push(this.onGameOver.bind(this)),s.COIN_CHANGED.push(this.onCoinChanged.bind(this)),i.GameAnalytics.addProgressionEvent(i.EGAProgressionStatus.Complete,"game","launch"),this.playTime=0,this.coin=0,this.game=cc.find("Canvas").getComponent("GameController"),this.spawner=cc.find("Camera").getComponent("spawner")},onGameStart:function(){this.playTime++,i.GameAnalytics.addProgressionEvent(i.EGAProgressionStatus.Complete,"game","session","start_"+this.playTime);var e=this.game.coin-this.coin;e>0&&(i.GameAnalytics.addResourceEvent(i.EGAResourceFlowType.Source,"coin",e,"kill","headshot"),this.coin=this.game.coin)},onGameOver:function(){i.GameAnalytics.addProgressionEvent(i.EGAProgressionStatus.Complete,"game","session","end_"+this.playTime),i.GameAnalytics.addProgressionEvent(i.EGAProgressionStatus.Complete,"game","boss_"+this.game.boss,"enemy_"+this.spawner.id%9,this.game.score)},onCoinChanged:function(e){e>0||(i.GameAnalytics.addResourceEvent(i.EGAResourceFlowType.Sink,"coin",-e,"item","armor"),this.coin-=e)}}),cc._RF.pop()},{GameEvent:"GameEvent",gameanalytics:1}],GameController:[function(e,t,n){"use strict";cc._RF.push(t,"767be/v4oZHrYRsZbJP/UXQ","GameController");var i=e("GameEvent"),s=5;cc.Class({extends:cc.Component,properties:{mainMenu:cc.Node,actionPhase:cc.Node,tutorial:cc.Node,coinTxt:cc.Label,scoreTxt:cc.Label,bestScoreTxt:cc.Label,lifeBar:cc.ProgressBar,subScore:cc.Label,splash:cc.Node,perfect:cc.Label},start:function(){i.GAME_OVER.push(this.onGameOver.bind(this)),i.POST_GAME.push(this.onPostGame.bind(this)),i.ENEMY_KILLED.push(this.onEnemyKilled.bind(this)),i.COIN_CHANGED.push(this.onCoinChanged.bind(this)),i.BOSS_HEALTH.push(this.onBossHealth.bind(this)),i.SPLASH.push(this.onHeadShot.bind(this)),this.bestScore=cc.sys.localStorage.getItem("bestScore")||0,this.coin=+cc.sys.localStorage.getItem("coin")||0,this.coinTxt.string=this.coin,this.bestScoreTxt.string=this.bestScore,this.seq=cc.spawn(cc.moveBy(.5,0,100),cc.fadeOut(.5)),this.seq2=cc.sequence(cc.delayTime(.5),cc.spawn(cc.scaleTo(.3,1,1),cc.moveTo(.3,0,800)),cc.callFunc(this.showHealthBar.bind(this))),this.seq3=cc.sequence(cc.fadeTo(.1,200),cc.fadeOut(.5)),this.seq4=cc.spawn(cc.scaleTo(.2,1,1),cc.sequence(cc.fadeIn(.2),cc.delayTime(.5),cc.fadeOut(.3)))},onHeadShot:function(e){this.splash.runAction(this.seq3);var t=this.perfect;t.node.scale=3,e?this.combo=1:(t.string="HO\xc0N H\u1ea2O"+(this.combo>1?" x"+this.combo:""),t.node.runAction(this.seq4))},onEnemyKilled:function(e){s--,e?this.combo++:this.combo=1;var t=(e?this.combo:1)*this.boss;this.score+=t,this.scoreTxt.string=this.score,this.subScore.string="+"+t;var n=this.subScore.node;n.color=cc.color(e?"ffc800":"ffffff"),n.opacity=255,n.y=-200,n.runAction(this.seq),(n=this.lifeBar.node).active=!1,this.lifeBar.progress<.1&&(n.parent.active=!1)},showHealthBar:function(){this.lifeBar.node.active=!0},onBossHealth:function(e){if(1==e){this.boss++;var t=this.lifeBar.node.parent;t.active=!0,t.scale=2,t.y=250,t.runAction(this.seq2)}else e+=.001;this.lifeBar.progress=e},onCoinChanged:function(e){this.coin+=e,this.coinTxt.string=this.coin},play:function(){this.mainMenu.active=!1,this.actionPhase.active=!0,s>0&&(this.tutorial.active=!0,cc.director.pause()),this.score=0,this.boss=1,this.combo=1,this.scoreTxt.string="0",i.invoke("GAME_START")},hideTutorial:function(){this.tutorial.active=!1,cc.director.resume()},onGameOver:function(){this.mainMenu.active=!0,this.actionPhase.active=!1;var e=this.lifeBar.node;e.active=!1,e.parent.active=!1,i.invoke("PLAY_SOUND","ev_back_to_game"),this.score>this.bestScore&&(this.bestScore=this.score,this.bestScoreTxt.string=this.score)},onFacebookClick:function(){FB.ui({method:"share",href:cc.sys.os==cc.sys.OS_IOS?"https://apps.apple.com/vn/app/my-viettel-\u0111\u01a1n-gi\u1ea3n-ti\u1ec7n-\xedch/id1014838705":"https://play.google.com/store/apps/details?id=com.vttm.vietteldiscovery",quote:"T\xf4i \u0111\xe3 \u0111\u1ea1t \u0111\u01b0\u1ee3c "+this.bestScore+" \u0111i\u1ec3m v\u1edbi tr\xf2 ch\u01a1i Viettel Hero trong \u1ee9ng d\u1ee5ng My Viettel. B\u1ea1n c\xf3 th\u1ec3 v\u01b0\u1ee3t qua t\xf4i kh\xf4ng?"},function(e){cc.log(e)})},onPostGame:function(){cc.sys.localStorage.setItem("bestScore",this.bestScore),cc.sys.localStorage.setItem("coin",this.coin)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],GameEvent:[function(e,t,n){"use strict";cc._RF.push(t,"aa02422vZVIyqtBpn8Q41pR","GameEvent");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=t.exports={};s.invoke=function(e,t,n){var i=this[e];for(var s in i)i[s](t,n)},s.reset=function(e){if("object"==(void 0===e?"undefined":i(e)))for(var t in e)s[e[t]]=[];else s[e]=[]},s.list=["ENEMY_KILLED","GAME_START","GAME_OVER","POST_GAME","COIN_CHANGED","BOSS_HIT","BOSS_HEALTH","SPLASH","PLAY_SOUND"],s.resetAll=function(){s.reset(s.list)},cc._RF.pop()},{}],MaterialLoader:[function(e,t,n){"use strict";cc._RF.push(t,"767daFU9llBPaKEknLq7owf","MaterialLoader");var i=e("CustomMaterial");cc.Class({extends:cc.Component,properties:{effect:"blend"},init:function(t){return this.target=this.node.getComponent(cc.RenderComponent),this.shader=e(t),this.material=new i(this.shader),this.targetMaterial=this.target._spriteMaterial||this.target.getMaterial(),this.material},onDisable:function(){this.target._spriteMaterial=this.targetMaterial,this.target._activateMaterial(!0)},onEnable:function(){var e=this.material||this.init(this.effect);e.color=this.node.color,e.texture=this.targetMaterial.texture,this.shader.start&&this.shader.start(e);var t=this.target;t._spriteMaterial?t._spriteMaterial=e:t._material=e,t._activateMaterial(!0),!this.shader.update&&(this.update=void 0)},set:function(e,t){this.shader.set&&this.shader.set(this.material,e,t)},update:function(e){this.shader.update(this.material,e)&&(this.enabled=!1)}}),cc._RF.pop()},{CustomMaterial:"CustomMaterial"}],PlayerController:[function(e,t,n){"use strict";cc._RF.push(t,"797ebBfgKNIIbtZ5k4ot0MI","PlayerController");var i=e("GameEvent");cc.Class({extends:cc.Component,properties:{gun:cc.Node,gunFire:cc.Node,deltaSpeed:2,minSpeed:30,maxSpeed:40,min:45,max:90,bullet:cc.Prefab,matLoader:e("MaterialLoader"),particle:cc.ParticleSystem,armor:cc.Node},onLoad:function(){this.enemy=cc.find("enemy").getComponent("enemy"),this.bulletPos=this.gun.children[0],this.bulletPool=cc.find("bulletPool"),this.count=1,this.armor.active=!1,this.seq=cc.sequence(cc.fadeTo(.05,200),cc.fadeOut(.05)),this.seq2=cc.sequence(cc.spawn(cc.rotateBy(.5,-1e3),cc.jumpTo(.5,cc.v2(-100,-500),500,1)),cc.callFunc(this.onRevive.bind(this))),this.anim=this.node.getComponentInChildren("body")},start:function(){i.GAME_START.push(this.onGameStart.bind(this)),i.BOSS_HEALTH.push(this.setRot.bind(this))},setRot:function(e){if(1==e){var t=this.minSpeed+this.deltaSpeed*this.boss;this.boss++,t>this.maxSpeed&&(t=this.maxSpeed),this.rot=t}},reset:function(){var e=this.node;this.fireCount=1,this.enabled=!1,this.matLoader.set(0),this.bulletPos.active=!1,e.setPosition(200,0),e.rotation=0,e.scaleX=1,this.gun.rotation=this.max,this.boss=0,this.setRot(1)},onGameStart:function(){},up:function(e){i.invoke("PLAY_SOUND","ev_reload_4"),this.anim.enabled=!0;var t=e.getFootPos(),n=e.getEnemyPos();this.node.runAction(cc.sequence(cc.moveTo(.3,t),cc.jumpTo(.1*e.c,n,50,e.c),cc.jumpTo(.1,cc.v2(this.node.scaleX<0?200:900,n.y),50,1),cc.callFunc(this.onFaceBack.bind(this))))},onFaceBack:function(){this.gun.rotation=this.max,this.rot=Math.abs(this.rot),this.fireCount=0,this.node.scaleX*=-1,this.bulletPos.active=!0,this.enabled=!0,this.particle.resetSystem(),i.invoke("PLAY_SOUND","ev_foot_boss_land"),this.anim.enabled=!1},fire:function(){this.bulletPos.active=!1,this.matLoader.set(0),!this.fireCount&&(this.fireCount=5*this.count)},update:function(e){var t=this.fireCount;if(t>1){if(t%5==0){var n=this.bulletPool.children,s=null,o=!0,r=!1,a=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;!d.active&&(s=d)}}catch(e){r=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw a}}s||((s=cc.instantiate(this.bullet)).parent=this.bulletPool);var l=this.gun.rotation;s.getComponent("bullet").set(this.gun.convertToWorldSpaceAR(this.bulletPos),this.node.scaleX>0?l-90:270-l,1/this.count,this.enemy),this.rot*=-1,i.invoke("PLAY_SOUND","ev_gun_4"),l*=Math.PI/180;var h=cc.v2(-20*Math.sin(l),-20*Math.cos(l));this.gun.runAction(cc.sequence(cc.moveBy(.05,h),cc.moveTo(.05,this.gun))),this.gunFire.runAction(this.seq)}this.fireCount--}else if(!t){var f=this.gun.rotation;(f-=e*this.rot)>this.max&&(this.rot=Math.abs(this.rot)),f<this.min&&(this.rot=-Math.abs(this.rot)),this.matLoader.set((this.max-f)/(this.max-this.min)),this.gun.rotation=f}},kill:function(){if(i.invoke("SPLASH",this),this.armor.active)return this.armor.runAction(this.seq2),void i.invoke("PLAY_SOUND","ev_armor_hit");i.invoke("PLAY_SOUND","ev_hit_head");var e=this.node.scaleX,t=cc.sequence(cc.spawn(cc.rotateBy(.5,1e3*-e),cc.jumpTo(.5,cc.v2(this.node.x,this.node.y-500),500,1)),cc.callFunc(this.onFinish.bind(this)));this.node.runAction(t)},onRevive:function(){var e=this.armor;e.active=!1,e.rotation=0,e.setPosition(0,80),this.gun.rotation=this.max,this.rot=Math.abs(this.rot),this.fireCount=0,this.bulletPos.active=!0,this.enemy.enabled=!0},onFinish:function(){i.invoke("GAME_OVER"),i.invoke("POST_GAME")}}),cc._RF.pop()},{GameEvent:"GameEvent",MaterialLoader:"MaterialLoader"}],SoundController:[function(e,t,n){"use strict";cc._RF.push(t,"201acJffCdCbqeCjGpKs/wV","SoundController");var i=e("GameEvent");cc.Class({extends:cc.Component,properties:{clips:{type:cc.AudioClip,default:[]}},start:function(){this.audio=new cc.Audio,this.audio.setLoop(!1),this.audio.setVolume(1),i.PLAY_SOUND.push(this.play.bind(this))},play:function(e){var t=this.audio;t.stop(),t.src=this.clips.find(function(t){return t.name==e}),t.setCurrentTime(0),t.play()}}),cc._RF.pop()},{GameEvent:"GameEvent"}],armorBtn:[function(e,t,n){"use strict";cc._RF.push(t,"4724c6FU4lDF4o4tk61f8K0","armorBtn");var i=e("GameEvent");cc.Class({extends:cc.Component,properties:{price:10},start:function(){this.armor=cc.find("player").getComponent("PlayerController").armor,i.COIN_CHANGED.push(this.onCoinChanged.bind(this)),i.GAME_OVER.push(this.onGameOver.bind(this)),this.btn=this.node.getComponent(cc.Button),this.node.getComponentInChildren(cc.Label).string=this.price,this.coin=+cc.sys.localStorage.getItem("coin")||0,this.onCoinChanged(0)},onCoinChanged:function(e){this.coin+=e;var t=this.coin>=this.price&&!this.armor.active;this.btn.interactable=t},onGameOver:function(){this.onCoinChanged(0)},onBuyArmor:function(){this.coin<this.price||(this.armor.active=!0,this.armor.getComponentInChildren(cc.ParticleSystem).resetSystem(),i.invoke("COIN_CHANGED",-this.price),i.invoke("PLAY_SOUND","ev_armor_equip"))}}),cc._RF.pop()},{GameEvent:"GameEvent"}],blend:[function(e,t,n){"use strict";cc._RF.push(t,"3a037kF7RxKB7Ms1qOIzugi","blend");var i={name:"blend",vert:"\n    uniform mat4 viewProj;\n    uniform mat4 model;\n    attribute vec3 a_position;\n    attribute vec2 a_uv0;\n    varying vec2 uv0;\n    \n    void main () {\n        mat4 mvp;\n        mvp = viewProj * model;\n        vec4 pos = mvp * vec4(a_position, 1);\n        gl_Position = pos;\n        uv0 = a_uv0;\n    }",frag:"\n    uniform sampler2D texture;\n    uniform vec4 color;\n    uniform float a1f;\n    varying vec2 uv0;\n\n    void main () {\n        vec2 uv = uv0 - 0.5;\n        float r = uv.x * uv.x + uv.y * uv.y;\n        float a = texture2D(texture, uv0).a + 0.001;\n        a = step(a, a1f) * step(r, 0.23);\n        gl_FragColor = vec4(color.rgb, 0.23 * a);\n    }",params:["a1f"],set:function(e,t){e.setParam("a1f",.13*t)}};cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){cc.renderer._forward._programLib.define(i.name,i.vert,i.frag,[])}),t.exports=i,cc._RF.pop()},{}],body:[function(e,t,n){"use strict";cc._RF.push(t,"698b6cbh+tB35+zO2XoCU0g","body"),cc.Class({extends:cc.Component,properties:{interval:.1,sprites:[cc.SpriteFrame]},start:function(){this.sprite=this.node.getComponent(cc.Sprite),this.onDisable()},onDisable:function(){this.timer=0,this.id=0,this.sprite.spriteFrame=this.sprites[this.id++]},update:function(e){var t=this.timer-e;if(t<0){var n=this.id;this.sprite.spriteFrame=this.sprites[n++],n==this.sprites.length&&(n=0),this.id=n,t=this.interval}this.timer=t}}),cc._RF.pop()},{}],bullet:[function(e,t,n){"use strict";cc._RF.push(t,"8009fpudvJB25do++lYPPv7","bullet");var i=e("GameEvent");cc.Class({extends:cc.Component,properties:{speed:100,bullet:cc.SpriteFrame,glow:cc.SpriteFrame},start:function(){var e=cc.sequence(cc.fadeOut(.3),cc.callFunc(this.onFinish.bind(this)));this.seq=cc.spawn(cc.scaleTo(.3,2),e),this.sprite=this.node.getComponent(cc.Sprite)},onFinish:function(){var e=this.node;e.active=!1,e.opacity=255,e.setScale(1),this.sprite.spriteFrame=this.bullet,this.target.checkAlive()},set:function(e,t,n,i){var s=this.node;s.rotation=t+180,t*=Math.PI/180,this.vx=Math.cos(t)*this.speed*n,this.vy=-Math.sin(t)*this.speed*n,this.target=i,s.setPosition(e),s.color=cc.Color.WHITE,s.active=!0,this.enabled=!0},onHit:function(e){var t=this.node;this.enabled=!1,this.sprite.spriteFrame=this.glow,t.runAction(this.seq),e.kill()},aimPlayer:function(e,t,n){var s=this.node;this.enabled=!1,s.active=!0,s.setPosition(e);var o=cc.sequence(cc.moveTo(.1,t),cc.callFunc(this.onHit.bind(this,n)));s.runAction(o),i.invoke("PLAY_SOUND","ev_gun_4")},update:function(e){var t=this.node,n=t.getPosition(),i=cc.v2(n);i.x+=this.vx*e,i.y+=this.vy*e;var s=this.target,o=s.stair.check(n,cc.v2(i));o?this.onFinish():((o=s.check(n,cc.v2(i)))?(t.setPosition(o),this.onHit(s)):t.setPosition(i),(n.x<0||n.x>1100)&&this.onFinish())}}),cc._RF.pop()},{GameEvent:"GameEvent"}],coin:[function(e,t,n){"use strict";cc._RF.push(t,"defc46zd3RL+LOGuP76wzsl","coin");var i=e("GameEvent");cc.Class({extends:cc.Component,properties:{delay:2,speed:1},start:function(){i.GAME_OVER.push(this.onGameOver.bind(this))},onGameOver:function(){var e=this.node;e.active&&(e.active=!1,i.invoke("COIN_CHANGED",1))},set:function(e,t){var n=this.node;n.setPosition(e.node),this.target=t,n.active=!0;var i=e.stair.getCoinPos(),s=e.node.scaleX;i.x+=200*Math.random()*s,n.runAction(cc.sequence(cc.jumpTo(.3*this.delay,i,150+100*Math.random(),1),cc.moveBy(.7*this.delay,250*(Math.random()+.3)*s,0))),this.time=.3*-Math.random()},update:function(e){var t=this.time;if((t+=e)>this.delay){var n=this.node,s=this.target,o=cc.v2(s.x-n.x,s.y-n.y).normalize(),r=this.speed*e;n.x+=o.x*r,n.y+=o.y*r,Math.abs(n.x-s.x)<10&&(n.active=!1,i.invoke("COIN_CHANGED",1),i.invoke("PLAY_SOUND","ev_coin"))}this.time=t}}),cc._RF.pop()},{GameEvent:"GameEvent"}],enemy:[function(e,t,n){"use strict";cc._RF.push(t,"58f6cKWDqJCKK+9yUkr5Al4","enemy");var i=e("GameEvent"),s=[{x:50,y:60,z:70,w:50},{x:40,y:90,z:40,w:30},{x:90,y:60,z:80,w:50}],o=["00ffff","ff00ff","ff0000","0000ff","00ff00"];cc.Class({extends:cc.Component,properties:{gun:cc.Node,gunFire:cc.Node,coin:cc.Prefab,particle:cc.Prefab,text:cc.Label,landParticle:cc.ParticleSystem},onLoad:function(){this.bulletPos=this.gun.children[0],this.teleport=cc.find("teleport_light_0"),this.bulletPool=cc.find("bulletPool"),this.coinPool=cc.find("coinPool"),this.particlePool=cc.find("particlePool"),this.player=cc.find("player").getComponent("PlayerController"),this.seq=cc.sequence(cc.delayTime(.4),cc.fadeTo(.05,200),cc.fadeOut(.05)),this.seq2=cc.spawn(cc.moveBy(.5,0,100),cc.fadeOut(.5))},boss:function(e){this.maxHealth=e?3+Math.floor(3*Math.random()):1;var t=this.node.children,n=t[e?2:1];n.active=!0,(n=t[e?1:2]).active=!1,i.invoke("BOSS_HEALTH",e?1:0)},reset:function(){var e=this.node;e.setPosition(-1e3,0),e.rotation=0,e.scaleX=1,this.gun.rotation=90},onFinish:function(){this.node.rotation=0,this.node.scaleX*=-1,i.invoke("ENEMY_KILLED",this.isHeadShot)},onBossLand:function(){this.landParticle.resetSystem(),i.invoke("PLAY_SOUND","ev_boss_appear_land")},set:function(e){this.stair=e,this.dead=!1,this.enabled=!0,this.health=this.maxHealth,this.isHeadShot=!1;var t=e.getEnemyPos(),n=this.node;if(this.maxHealth>1){i.invoke("PLAY_SOUND","ev_boss_appear_spin"),n.setPosition(t.x>540?1200:-100,t.y+200);var o=cc.spawn(cc.jumpTo(.7,t,300,1),cc.rotateBy(.7,360*n.scaleX));n.runAction(o);var r=this.teleport;r.setPosition(t.x>540?1400:-300,t.y+200),r.scaleX=-n.scaleX,r.runAction(cc.sequence(cc.moveTo(.1,t.x>540?1080:0,t.y+200),cc.delayTime(.7),cc.callFunc(this.onBossLand.bind(this)),cc.moveTo(.1,r)))}else{var a=Math.floor(Math.random()*s.length);n.setPosition(t.x>540?1200:-100,t.y),0==a&&n.runAction(cc.moveTo(.3,t)),1==a&&n.runAction(cc.jumpTo(.3,t,50,1)),2==a&&n.runAction(cc.jumpTo(.5,t,20,5))}},updateColor:function(){var e=this.node,t=Math.floor(Math.random()*o.length);e.color=cc.color(o[t]),t=Math.floor(Math.random()*s.length);var n=s[t];return e.setContentSize(n.x,n.y),(e=this.node.children[0]).setContentSize(n.z,n.w),e.y=n.y,t},up:function(e){this.stair=e,this.dead=!1,this.enabled=!0,this.isHeadShot=!1;var t=e.getFootPos(),n=e.getEnemyPos();this.node.runAction(cc.sequence(cc.moveTo(.2,t),cc.jumpTo(.1*e.c,n,50,e.c),cc.callFunc(this.onFaceBack.bind(this))))},onFaceBack:function(){this.node.scaleX*=-1,i.invoke("PLAY_SOUND","ev_foot_boss_land")},swap:function(e,t){var n=e.x;e.x=t.x,t.x=n,n=e.y,e.y=t.y,t.y=n},check:function(e,t){var n=this.node,s=n.getBoundingBox(),o=cc.v2(),r=!0;if(n.scaleX<0?(t.x<s.xMin||e.x>s.xMax||e.y>s.yMax)&&(r=!1):(t.x>s.xMax||e.x<s.xMin||e.y>s.yMax)&&(r=!1),r)for(var a=0;a<1;a+=.1)if(o.x=e.x+(t.x-e.x)*a,o.y=e.y+(t.y-e.y)*a,s.contains(o))return i.invoke("PLAY_SOUND","ev_hit_torso"),o;if(s=n.children[0].getBoundingBoxToWorld(),r=!0,n.scaleX<0?(t.x<s.xMin||e.x>s.xMax||e.y>s.yMax)&&(r=!1):(t.x>s.xMax||e.x<s.xMin||e.y>s.yMax)&&(r=!1),r)for(var c=0;c<1;c+=.1)if(o.x=e.x+(t.x-e.x)*c,o.y=e.y+(t.y-e.y)*c,s.contains(o))return this.isHeadShot=!0,this.spawnParticle(20*(Math.random()+.5)),i.invoke("SPLASH"),i.invoke("PLAY_SOUND","ev_hit_head"),o},checkAlive:function(){if(!(this.health<1)&&this.enabled)if(this.enabled=!1,this.dead)i.invoke("BOSS_HIT",this.isHeadShot);else{var e=this.bulletPool.children,t=null,n=!0,s=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var c=r.value;!c.active&&(t=c.getComponent("bullet"))}}catch(e){s=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}var u=this.player.node,d=u.convertToWorldSpaceAR(u.children[0]),l=this.gun.convertToWorldSpaceAR(this.bulletPool),h=cc.v2(d.x-l.x,d.y-l.y);t.node.rotation=180*Math.atan2(h.y,-h.x)/Math.PI;var f=270+180*Math.atan2(h.y,-h.x*this.node.scaleX)/Math.PI;(u=this.gun).rotation=f,l=this.gun.convertToWorldSpaceAR(this.bulletPos),u.rotation=90;var v=f-u.rotation;f*=Math.PI/180,h=cc.v2(-20*Math.sin(f),-20*Math.cos(f));var m=cc.sequence(cc.rotateBy(.3,v),cc.delayTime(.1),cc.callFunc(t.aimPlayer.bind(t,l,d,this.player)),cc.moveBy(.05,h),cc.moveTo(.05,u),cc.rotateBy(.2,-v));this.gunFire.runAction(this.seq),u.runAction(m)}},spawnCoin:function(e){for(var t=this.coinPool.children;e-- >0;){var n=null,i=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var c=r.value;!c.active&&(n=c)}}catch(e){s=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(s)throw o}}n||((n=cc.instantiate(this.coin)).parent=this.coinPool),n.getComponent("coin").set(this,this.player.node)}},spawnParticle:function(e){for(var t=this.particlePool.children;e-- >0;){var n=null,i=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var c=r.value;!c.active&&(n=c)}}catch(e){s=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(s)throw o}}n||((n=cc.instantiate(this.particle)).parent=this.particlePool),n.getComponent("particle").set(this)}},kill:function(){var e=this.node,t=this.isHeadShot?2:1;if(this.health-=t,this.maxHealth>1&&(e.runAction(cc.sequence(cc.moveBy(.05,-30*e.scaleX,0),cc.moveTo(.1,e))),i.invoke("BOSS_HEALTH",this.health/this.maxHealth)),this.dead=!0,this.health>0){var n=this.text.node;return n.y=90,n.scaleX=e.scaleX,n.opacity=255,n.color=cc.color(this.isHeadShot?"ffc800":"ffffff"),this.text.string=-t,void n.runAction(this.seq2)}var s=e.scaleX,o=cc.sequence(cc.spawn(cc.rotateBy(.5,1e3*-s),cc.jumpTo(.5,cc.v2(s<0?1300:-100,e.y-500),500,1)),cc.callFunc(this.onFinish.bind(this)));e.runAction(o),(this.isHeadShot||this.maxHealth>1)&&this.spawnCoin(this.maxHealth)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],particle:[function(e,t,n){"use strict";cc._RF.push(t,"887daf/BktBhqZhyhZUoju9","particle");var i=e("GameEvent");cc.Class({extends:cc.Component,properties:{delay:2},start:function(){i.GAME_OVER.push(this.onGameOver.bind(this))},onGameOver:function(){this.node.active=!1},set:function(e){var t=this.node;t.setPosition(e.node),t.opacity=255,t.active=!0;var n=e.stair.getCoinPos(),i=e.node.scaleX;n.x+=500*Math.random()*i,t.runAction(cc.sequence(cc.jumpTo(this.delay*(.1*Math.random()+.25),n,150+500*Math.random(),1),cc.moveBy(this.delay*(Math.random()+.3),300*(Math.random()+.1)*i,0))),this.time=Math.random()+.3},update:function(e){var t=this.time;if((t+=e)>this.delay){var n=this.node;n.opacity--,n.opacity<=0&&(n.active=!1)}this.time=t}}),cc._RF.pop()},{GameEvent:"GameEvent"}],spawner:[function(e,t,n){"use strict";cc._RF.push(t,"092d76vWbdDjqjNrwSM8tDj","spawner");var i=e("GameEvent");cc.Class({extends:cc.Component,properties:{colors:[cc.Color],obj:cc.Prefab,count:10},onLoad:function(){i.resetAll()},reset:function(){this.player.reset(),this.enemy.reset(),this.node.y=0,this.id=0,this.prevC=2;var e=this.pos=cc.v2(0,this.player.node.y);this.color=this.colors[0];for(var t=this.stack,n=this.count,i=this.prevC,s=0;s<n;s++)i=t[s].set(e,i);this.prevC=i},start:function(){this.content=cc.director.getScene();for(var e=cc.find("player"),t=this.stack=[],n=this.content,s=this.count,o=0;o<s;o++){var r=cc.instantiate(this.obj),a=r.getComponent("stair");r.parent=n,r.scaleX=o%2?-1:1,t.push(a)}this.enemy=cc.find("enemy").getComponent("enemy"),this.player=e.getComponent("PlayerController"),this.delta=this.node.y-e.y,this.reset(),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart.bind(this)),i.ENEMY_KILLED.push(this.onEnemyKilled.bind(this)),i.GAME_START.push(this.onEnemyKilled.bind(this)),i.GAME_OVER.push(this.reset.bind(this)),i.BOSS_HIT.push(this.onBossHit.bind(this))},onEnemyKilled:function(){var e=this.id,t=this.stack;this.player.up(t[e]),++e>=t.length&&(e=0),this.enemy.boss(e&&e%9==0),this.enemy.set(t[e]),this.id=e},onBossHit:function(){var e=this.id,t=this.stack;this.player.up(t[e]),++e>=t.length&&(e=0),this.enemy.up(t[e]),this.id=e},onTouchStart:function(e){this.player.fire()},updateStack:function(){var e=this.stack,t=this.player.node.y,n=this.color,i=this.colors[1],s=!0,o=!1,r=void 0;try{for(var a,c=e[Symbol.iterator]();!(s=(a=c.next()).done);s=!0){var u=a.value,d=u.node.y-t;if(d<-1300)this.prevC=u.set(this.pos,this.prevC);else{var l=n.lerp(i,d/1300);u.updateColor(l)}}}catch(e){o=!0,r=e}finally{try{!s&&c.return&&c.return()}finally{if(o)throw r}}},update:function(e){var t=this.player.node.y+this.delta,n=this.node;n.y<t&&(n.y=.5*(n.y+t),this.updateStack())}}),cc._RF.pop()},{GameEvent:"GameEvent"}],stair:[function(e,t,n){"use strict";cc._RF.push(t,"5f303zPbt1LLLIgPSVH+cdL","stair");var i=[0];cc.Class({extends:cc.Component,properties:{decoration:cc.Sprite,decoList:[cc.SpriteFrame],patterns:[cc.Node]},onLoad:function(){var e=this.node.children;this.stair=e[1],this.wall=e[0],this.pixel=e[2].children[0]},fillBag:function(e){for(var t=this.decoList.length,n=t,s=Math.floor(Math.random()*t);n--;){for(;i[s];)s+=Math.floor(Math.random()*t),s%=t;i[s]=n}i[t-1]==e&&(i[t-1]=i[1],i[1]=e),i.length=t},set:function(e,t){var n=this.node;if(Math.random()>.4)this.decoration.spriteFrame=null;else{var s=i.pop();!i.length&&this.fillBag(s),this.decoration.spriteFrame=this.decoList[s]}for(var o=this.patterns,r=Math.floor(Math.random()*(o.length-1)),a=0;a<o.length-1;a++)o[a].active=a==r;this.c=t;var c=5-Math.floor(Math.random()*(7-t)),u=50*t,d=cc.v2(50*c,u-this.stair.height);return this.pixel.width=1019+d.x-u,this.stair.setPosition(d),this.wall.setPosition(d),n.setPosition(540,e.y),n.setSiblingIndex(0),e.y+=u,t=(t+=Math.floor(3*(Math.random()+.3)))%7+2},updateColor:function(e){var t=this.node.children,n=!0,i=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){o.value.color=e}}catch(e){i=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}t=this.patterns;var a=!0,c=!1,u=void 0;try{for(var d,l=t[Symbol.iterator]();!(a=(d=l.next()).done);a=!0){d.value.color=e}}catch(e){c=!0,u=e}finally{try{!a&&l.return&&l.return()}finally{if(c)throw u}}},swap:function(e,t){var n=e.x;e.x=t.x,t.x=n,n=e.y,e.y=t.y,t.y=n},check:function(e,t){for(var n=this.node,i=this.stair.getBoundingBoxToWorld(),s=cc.v2(),o=0;o<1;o+=.1){if(s.x=e.x+(t.x-e.x)*o,s.y=e.y+(t.y-e.y)*o,s.y>i.yMax)return null;var r=Math.floor((s.y-i.yMin-12)/50);if(n.scaleX<0){if(s.x<i.xMax-50*r)return s}else if(s.x>50*r+i.xMin)return s}},getEnemyPos:function(){var e=this.stair,t=this.node;return cc.v2(e.x*t.scaleX+t.x,e.y+e.height+t.y)},getCoinPos:function(){var e=this.stair,t=this.node,n=this.c+1;return cc.v2((e.x-50*n)*t.scaleX+t.x,t.y)},getFootPos:function(){var e=this.stair,t=this.node,n=this.c+1;return cc.v2((e.x-50*n)*t.scaleX+t.x,t.y)}}),cc._RF.pop()},{}]},{},["CustomMaterial","GAPlugin","GameController","GameEvent","MaterialLoader","PlayerController","SoundController","armorBtn","blend","body","bullet","coin","enemy","particle","spawner","stair"]);